<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PEARL Agent - Agentic Career Mentor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard-container {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            gap: 20px;
            margin-top: 20px;
        }

        /* SIDEBAR STYLES */
        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-menu li {
            margin-bottom: 10px;
        }

        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: all 0.3s;
        }

        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: #667eea;
            color: white;
        }

        .sidebar-menu a.active {
            font-weight: 600;
        }

        .menu-icon {
            font-size: 1.2em;
        }

        /* MAIN CONTENT STYLES */
        .main-content {
            min-height: calc(100vh - 100px);
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* RIGHT PANEL STYLES */
        .right-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .quick-stats {
            margin-bottom: 25px;
        }

        .quick-stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .quick-stat-item:last-child {
            border-bottom: none;
        }

        .stat-value {
            font-weight: 700;
            color: #667eea;
            font-size: 1.1em;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        /* NEW STYLES FOR FEATURES */
        .onboarding-steps {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 20px;
            right: 20px;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-number {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 8px;
            transition: all 0.3s;
        }

        .step.active .step-number {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .step.completed .step-number {
            background: #48bb78;
            color: white;
        }

        .step-label {
            font-size: 0.8em;
            color: #666;
            text-align: center;
        }

        .step.active .step-label {
            color: #667eea;
            font-weight: 600;
        }

        .onboarding-form {
            max-width: 500px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: #667eea;
        }

        .select-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            cursor: pointer;
        }

        .skills-input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .skill-tag-input {
            flex: 1;
        }

        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .skill-tag {
            background: #e0e7ff;
            color: #667eea;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .remove-skill {
            cursor: pointer;
            font-size: 1.2em;
            line-height: 1;
        }

        .remove-skill:hover {
            color: #f56565;
        }

        /* GAMIFICATION STYLES */
        .gamification-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .points-display {
            text-align: center;
            margin-bottom: 25px;
        }

        .points-value {
            font-size: 3em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        .points-label {
            color: #666;
            font-size: 0.9em;
        }

        .achievement-badges {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .achievement-badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .badge-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            margin-bottom: 8px;
            transition: transform 0.3s;
        }

        .achievement-badge.earned .badge-icon {
            background: #48bb78;
            color: white;
            transform: scale(1.1);
        }

        .badge-name {
            font-size: 0.75em;
            color: #666;
            font-weight: 500;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
        }

        .leaderboard-table th {
            text-align: left;
            padding: 12px;
            border-bottom: 2px solid #e0e0e0;
            color: #666;
            font-weight: 600;
        }

        .leaderboard-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        .leaderboard-table tr:hover {
            background: #f8f9ff;
        }

        .rank-cell {
            font-weight: 700;
            color: #667eea;
        }

        .user-cell {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar-small {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
        }

        /* RESUME BUILDER STYLES */
        .resume-builder {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .resume-preview {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            margin: 25px 0;
            border: 2px solid #e0e0e0;
        }

        .resume-section {
            margin-bottom: 25px;
        }

        .resume-section-title {
            font-size: 1.2em;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #667eea;
        }

        .resume-item {
            margin-bottom: 15px;
        }

        .resume-item-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .resume-item-details {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .resume-item-description {
            color: #666;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .skill-tags-resume {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .resume-actions {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        /* ANALYTICS STYLES */
        .analytics-dashboard {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 20px;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .metric-card {
            background: #f8f9ff;
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid #667eea;
        }

        .metric-value {
            font-size: 2em;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #666;
            font-size: 0.9em;
        }

        .metric-change {
            font-size: 0.85em;
            margin-top: 8px;
        }

        .metric-change.positive {
            color: #48bb78;
        }

        .metric-change.negative {
            color: #f56565;
        }

        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        /* CONTENT RECOMMENDATIONS */
        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .recommendation-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .recommendation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .rec-type-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .rec-type-course {
            background: #dbeafe;
            color: #0369a1;
        }

        .rec-type-video {
            background: #e0e7ff;
            color: #667eea;
        }

        .rec-type-project {
            background: #fce7f3;
            color: #be185d;
        }

        .rec-type-taiken {
            background: #fef08a;
            color: #854d0e;
        }

        .recommendation-title {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 8px;
            color: #333;
        }

        .recommendation-desc {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .recommendation-meta {
            display: flex;
            justify-content: space-between;
            color: #999;
            font-size: 0.85em;
        }

        /* PROFILE COMPLETE VIEW */
        .profile-complete-view {
            background: white;
            border-radius: 12px;
            padding: 30px;
        }

        .profile-header-complete {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #eee;
        }

        .profile-avatar-xl {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid #667eea;
        }

        .profile-info-complete {
            flex: 1;
        }

        .profile-name {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 10px;
            color: #333;
        }

        .profile-title {
            font-size: 1.2em;
            color: #667eea;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .profile-bio-complete {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .profile-stats-complete {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .profile-stat-item {
            text-align: center;
        }

        .profile-stat-value {
            font-size: 1.8em;
            font-weight: 700;
            color: #667eea;
            display: block;
        }

        .profile-stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .profile-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        .profile-tab {
            padding: 10px 20px;
            border-radius: 8px;
            background: none;
            border: none;
            font-size: 1em;
            font-weight: 500;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }

        .profile-tab:hover {
            background: #f8f9ff;
            color: #667eea;
        }

        .profile-tab.active {
            background: #667eea;
            color: white;
        }

        .profile-tab-content {
            min-height: 400px;
        }

        /* PROGRESS CIRCLE */
        .progress-circle {
            width: 100px;
            height: 100px;
            position: relative;
            margin: 0 auto 15px;
        }

        .circle-bg {
            fill: none;
            stroke: #e0e0e0;
            stroke-width: 8;
        }

        .circle-progress {
            fill: none;
            stroke: #667eea;
            stroke-width: 8;
            stroke-linecap: round;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
            transition: stroke-dasharray 0.5s;
        }

        .circle-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5em;
            font-weight: 700;
            color: #333;
        }

        /* TIME SELECTOR */
        .time-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .time-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }

        .time-btn:hover {
            border-color: #667eea;
            color: #667eea;
        }

        .time-btn.active {
            background: #667eea;
            border-color: #667eea;
            color: white;
        }

        /* LOADING SKELETON */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-text {
            height: 1em;
            margin-bottom: 10px;
        }

        .skeleton-title {
            height: 1.5em;
            width: 70%;
            margin-bottom: 15px;
        }

        .skeleton-card {
            height: 200px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        /* TOOLTIPS */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background: #333;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
            font-weight: normal;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 1200px) {
            .dashboard-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar, .right-panel {
                position: static;
                margin-bottom: 20px;
            }
            
            .content-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .profile-header-complete {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-stats-complete {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .resume-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .navbar {
                flex-direction: column;
                gap: 15px;
            }
            
            .profile-stats-complete {
                grid-template-columns: 1fr;
            }
        }

        /* KEEP ALL YOUR EXISTING STYLES BELOW */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 30px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .navbar-brand {
            font-size: 1.5em;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            cursor: pointer;
        }

        .navbar-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn-nav {
            padding: 8px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-signin {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-signin:hover {
            background: #667eea;
            color: white;
        }

        .btn-signup {
            background: #667eea;
            color: white;
        }

        .btn-signup:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .user-menu {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .user-menu:hover {
            background: #f8f9fa;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #667eea;
        }

        .user-name {
            font-weight: 600;
            color: #333;
        }

        .dropdown-menu {
            position: absolute;
            top: 55px;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-width: 200px;
            display: none;
            z-index: 1000;
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.3s;
            border-bottom: 1px solid #f0f0f0;
        }

        .dropdown-item:last-child {
            border-bottom: none;
            border-radius: 0 0 8px 8px;
        }

        .dropdown-item:first-child {
            border-radius: 8px 8px 0 0;
        }

        .dropdown-item:hover {
            background: #f8f9fa;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 20px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 40px;
            max-width: 450px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5em;
            cursor: pointer;
            color: #999;
        }

        .modal-close:hover {
            color: #333;
        }

        .modal-title {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 10px;
            color: #333;
        }

        .modal-subtitle {
            color: #666;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .skill-chip {
            display: inline-block;
            background: #e0e7ff;
            color: #667eea;
            padding: 8px 16px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .module-card {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .module-card:hover:not(.locked) {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: translateX(5px);
        }

        .module-card.completed {
            border-left-color: #48bb78;
            background: #f0fdf4;
        }

        .module-card.active {
            border-left-color: #ed8936;
            background: #fffbf0;
        }

        .module-card.locked {
            border-left-color: #cbd5e0;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            border: 4px solid #f0f0f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-error {
            background: #fef2f2;
            color: #7f1d1d;
            border: 1px solid #fecaca;
        }

        .alert-success {
            background: #f0fdf4;
            color: #065f46;
            border: 1px solid #bbf7d0;
        }

        .action-box {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .action-box:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .action-box.completed {
            background: #f0fdf4;
            border-color: #48bb78;
        }

        .action-type-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .badge-byte {
            background: #e0e7ff;
            color: #667eea;
        }

        .badge-course {
            background: #dbeafe;
            color: #0369a1;
        }

        .badge-taiken {
            background: #fce7f3;
            color: #be185d;
        }

        .badge-checkpoint {
            background: #fef08a;
            color: #854d0e;
        }

        .breadcrumb {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #666;
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .breadcrumb-item:hover {
            color: #667eea;
        }

        .breadcrumb-item::after {
            content: "‚Üí";
            margin: 0 10px;
        }

        .breadcrumb-item:last-child::after {
            content: "";
            margin: 0;
        }

        .breadcrumb-item.active {
            color: #667eea;
            font-weight: 600;
            cursor: default;
        }

        .quiz-question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .quiz-option {
            background: white;
            padding: 12px 16px;
            margin: 8px 0;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .quiz-option.selected {
            border-color: #667eea;
            background: #e0e7ff;
        }

        .quiz-option.correct {
            border-color: #48bb78;
            background: #f0fdf4;
        }

        .quiz-option.incorrect {
            border-color: #f56565;
            background: #fef2f2;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: #999;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e0e0e0;
        }

        .divider span {
            padding: 0 15px;
        }

        .link-text {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }

        .link-text a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            cursor: pointer;
        }

        .link-text a:hover {
            text-decoration: underline;
        }

        .oauth-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-oauth {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            color: #333;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-oauth:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #667eea;
        }

        .profile-info h2 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .profile-info .bio {
            color: #666;
            margin: 10px 0;
        }

        .profile-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
        }

        .skill-gap-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .skill-name {
            font-weight: 600;
            color: #333;
        }

        .skill-progress {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .progress-bar-small {
            width: 150px;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill-small {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s;
        }

        .skill-level {
            font-size: 0.9em;
            font-weight: 600;
            color: #667eea;
        }

        /* NEW BUTTON VARIATIONS */
        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .btn-warning {
            background: #ed8936;
            color: white;
        }

        .btn-warning:hover {
            background: #dd6b20;
        }

        .btn-info {
            background: #4299e1;
            color: white;
        }

        .btn-info:hover {
            background: #3182ce;
        }

        /* ICON BUTTONS */
        .btn-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 16px;
        }

        .btn-icon .icon {
            font-size: 1.1em;
        }

        /* FLOATING ACTION BUTTON */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.5);
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.6);
        }

        /* NOTIFICATION BADGE */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #f56565;
            color: white;
            font-size: 0.7em;
            font-weight: 700;
            padding: 3px 6px;
            border-radius: 10px;
            min-width: 18px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Navigation Bar -->
        <div class="navbar">
            <div class="navbar-brand" onclick="showDashboard()">üéì PEARL Agent</div>
            <div class="navbar-actions" id="navbarActions"></div>
        </div>

        <!-- Main Dashboard -->
        <div id="dashboardSection" class="section active">
            <div class="dashboard-container">
                <!-- Sidebar -->
                <div class="sidebar">
                    <ul class="sidebar-menu">
                        <li><a href="#" onclick="showDashboard()" class="active">
                            <span class="menu-icon">üè†</span> Dashboard
                        </a></li>
                        <li><a href="#" onclick="showOnboarding()" id="onboardingMenuItem">
                            <span class="menu-icon">üöÄ</span> Onboarding
                            <span id="onboardingBadge" class="notification-badge" style="display: none;">!</span>
                        </a></li>
                        <li><a href="#" onclick="showLearningPaths()">
                            <span class="menu-icon">üìö</span> Learning Paths
                        </a></li>
                        <li><a href="#" onclick="showGamification()">
                            <span class="menu-icon">üèÜ</span> Gamification
                        </a></li>
                        <li><a href="#" onclick="showResumeBuilder()">
                            <span class="menu-icon">üìÑ</span> Resume Builder
                        </a></li>
                        <li><a href="#" onclick="showAnalytics()">
                            <span class="menu-icon">üìä</span> Analytics
                        </a></li>
                        <li><a href="#" onclick="showContentRecommendations()">
                            <span class="menu-icon">üéØ</span> Recommendations
                        </a></li>
                        <li><a href="#" onclick="showCompleteProfile()">
                            <span class="menu-icon">üë§</span> Complete Profile
                        </a></li>
                        <li><a href="#" onclick="showJobRecommendations()">
                            <span class="menu-icon">üíº</span> Job Matches
                        </a></li>
                    </ul>
                </div>

                <!-- Main Content -->
                <div class="main-content">
                    <!-- Dashboard Content will be loaded here -->
                    <div id="dashboardContent">
                        <div class="card">
                            <h2>Welcome back! üëã</h2>
                            <p style="color: #666; margin-bottom: 20px;">Here's your learning overview</p>
                            
                            <!-- Quick Stats -->
                            <div class="stats-grid" id="quickStats">
                                <!-- Will be populated by JavaScript -->
                            </div>
                            
                            <!-- Recent Activity -->
                            <div style="margin-top: 30px;">
                                <h3 style="margin-bottom: 15px;">Recent Activity</h3>
                                <div id="recentActivity">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                            </div>
                            
                            <!-- Next Steps -->
                            <div style="margin-top: 30px;">
                                <h3 style="margin-bottom: 15px;">Next Steps</h3>
                                <div id="nextSteps">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel -->
                <div class="right-panel">
                    <div class="quick-stats">
                        <h3 style="margin-bottom: 15px;">Quick Stats</h3>
                        <div id="rightPanelStats">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div style="margin-top: 25px;">
                        <h3 style="margin-bottom: 15px;">Daily Challenge</h3>
                        <div id="dailyChallenge">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div style="margin-top: 25px;">
                        <button class="btn-primary" style="width: 100%;" onclick="claimDailyRewards()">
                            üéÅ Claim Daily Rewards
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onboarding Section -->
        <div id="onboardingSection" class="section">
            <div class="card">
                <button class="btn-secondary" onclick="showDashboard()" style="margin-bottom: 20px;">‚Üê Back to Dashboard</button>
                
                <h2>Welcome to PEARL! üöÄ</h2>
                <p style="color: #666; margin-bottom: 30px;">Let's set up your personalized learning journey</p>
                
                <!-- Step Indicator -->
                <div class="step-indicator">
                    <div class="step active" id="step1">
                        <div class="step-number">1</div>
                        <div class="step-label">Basic Info</div>
                    </div>
                    <div class="step" id="step2">
                        <div class="step-number">2</div>
                        <div class="step-label">Career Goal</div>
                    </div>
                    <div class="step" id="step3">
                        <div class="step-number">3</div>
                        <div class="step-label">Skills</div>
                    </div>
                    <div class="step" id="step4">
                        <div class="step-number">4</div>
                        <div class="step-label">Preferences</div>
                    </div>
                    <div class="step" id="step5">
                        <div class="step-number">5</div>
                        <div class="step-label">Confirmation</div>
                    </div>
                </div>
                
                <!-- Step 1: Basic Info -->
                <div id="onboardingStep1" class="onboarding-form">
                    <h3 style="margin-bottom: 20px;">Basic Information</h3>
                    
                    <div class="form-group">
                        <label class="form-label">What's your current status?</label>
                        <select id="currentStatus" class="select-control">
                            <option value="student">Student</option>
                            <option value="employed">Employed</option>
                            <option value="unemployed">Looking for work</option>
                            <option value="career_switcher">Career Switcher</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">What's your primary field of study/work?</label>
                        <input type="text" id="fieldOfStudy" class="form-control" placeholder="e.g., Computer Science, Business, Design">
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-secondary" onclick="showDashboard()">Cancel</button>
                        <button class="btn-primary" onclick="nextOnboardingStep()">Next ‚Üí</button>
                    </div>
                </div>
                
                <!-- Step 2: Career Goal -->
                <div id="onboardingStep2" class="onboarding-form" style="display: none;">
                    <h3 style="margin-bottom: 20px;">Career Goals</h3>
                    
                    <div class="form-group">
                        <label class="form-label">Primary Career Goal</label>
                        <input type="text" id="careerGoal" class="form-control" placeholder="e.g., Become a Backend Developer">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Specific Target Role</label>
                        <input type="text" id="targetRole" class="form-control" placeholder="e.g., Senior Python Developer">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Short-term Goal (next 3-6 months)</label>
                        <textarea id="shortTermGoal" class="form-control" rows="3" placeholder="What do you want to achieve in the short term?"></textarea>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-secondary" onclick="prevOnboardingStep()">‚Üê Back</button>
                        <button class="btn-primary" onclick="nextOnboardingStep()">Next ‚Üí</button>
                    </div>
                </div>
                
                <!-- Step 3: Skills -->
                <div id="onboardingStep3" class="onboarding-form" style="display: none;">
                    <h3 style="margin-bottom: 20px;">Skills Assessment</h3>
                    <p style="color: #666; margin-bottom: 20px;">Add skills you already have or want to learn</p>
                    
                    <div class="skills-input-container">
                        <input type="text" id="skillInput" class="form-control skill-tag-input" placeholder="Add a skill (e.g., Python, React, UX Design)">
                        <button class="btn-success" onclick="addSkill()">Add</button>
                    </div>
                    
                    <div class="skill-tags" id="skillTagsContainer">
                        <!-- Skills will be added here -->
                    </div>
                    
                    <div style="margin-top: 30px;">
                        <h4 style="margin-bottom: 15px;">Common Skills for Your Goal</h4>
                        <div id="suggestedSkills">
                            <!-- Suggested skills will be added here -->
                        </div>
                    </div>
                    
                    <div class="button-group" style="margin-top: 30px;">
                        <button class="btn-secondary" onclick="prevOnboardingStep()">‚Üê Back</button>
                        <button class="btn-primary" onclick="nextOnboardingStep()">Next ‚Üí</button>
                    </div>
                </div>
                
                <!-- Step 4: Preferences -->
                <div id="onboardingStep4" class="onboarding-form" style="display: none;">
                    <h3 style="margin-bottom: 20px;">Learning Preferences</h3>
                    
                    <div class="form-group">
                        <label class="form-label">How much time can you commit per week?</label>
                        <select id="timeAvailability" class="select-control">
                            <option value="1-5 hours/week">1-5 hours/week</option>
                            <option value="5-10 hours/week" selected>5-10 hours/week</option>
                            <option value="10-20 hours/week">10-20 hours/week</option>
                            <option value="20+ hours/week">20+ hours/week</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Preferred learning style</label>
                        <select id="learningPreference" class="select-control">
                            <option value="video">Video Tutorials</option>
                            <option value="reading">Reading & Articles</option>
                            <option value="hands_on">Hands-on Projects</option>
                            <option value="mixed" selected>Mixed (Recommended)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Any constraints?</label>
                        <div style="display: flex; gap: 15px; margin-top: 10px;">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="constraintFreeOnly">
                                <span>Free resources only</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="constraintHeavyWorkload">
                                <span>Heavy workload</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Current confidence level (1-5)</label>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button type="button" class="time-btn" onclick="setConfidence(1)">1 - Beginner</button>
                            <button type="button" class="time-btn" onclick="setConfidence(2)">2</button>
                            <button type="button" class="time-btn" onclick="setConfidence(3)">3 - Intermediate</button>
                            <button type="button" class="time-btn" onclick="setConfidence(4)">4</button>
                            <button type="button" class="time-btn" onclick="setConfidence(5)">5 - Advanced</button>
                        </div>
                        <input type="hidden" id="confidenceBaseline" value="3">
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-secondary" onclick="prevOnboardingStep()">‚Üê Back</button>
                        <button class="btn-primary" onclick="nextOnboardingStep()">Next ‚Üí</button>
                    </div>
                </div>
                
                <!-- Step 5: Confirmation -->
                <div id="onboardingStep5" class="onboarding-form" style="display: none;">
                    <h3 style="margin-bottom: 20px;">Almost There! üéâ</h3>
                    <p style="color: #666; margin-bottom: 30px;">Review your information and start your journey</p>
                    
                    <div class="card" style="background: #f8f9ff; margin-bottom: 25px;">
                        <div id="onboardingSummary">
                            <!-- Summary will be populated here -->
                        </div>
                    </div>
                    
                    <div class="alert alert-success" style="display: none;" id="onboardingSuccess">
                        ‚úÖ Onboarding completed successfully! Redirecting to your dashboard...
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-secondary" onclick="prevOnboardingStep()">‚Üê Edit</button>
                        <button class="btn-primary" onclick="completeOnboarding()" id="completeOnboardingBtn">
                            Complete Onboarding üöÄ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gamification Section -->
        <div id="gamificationSection" class="section">
            <div class="card">
                <button class="btn-secondary" onclick="showDashboard()" style="margin-bottom: 20px;">‚Üê Back to Dashboard</button>
                
                <div class="gamification-card">
                    <div class="points-display">
                        <div class="points-value" id="totalPoints">0</div>
                        <div class="points-label">Plaro Points</div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="streakCount">0</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="rankLevel">Beginner</div>
                            <div class="stat-label">Current Rank</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="achievementsCount">0</div>
                            <div class="stat-label">Achievements</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="leaderboardRank">-</div>
                            <div class="stat-label">Leaderboard Rank</div>
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-top: 20px;">
                    <div>
                        <h3 style="margin-bottom: 15px;">Achievements</h3>
                        <div class="achievement-badges" id="achievementsList">
                            <!-- Achievements will be loaded here -->
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="margin-bottom: 15px;">Daily Challenge</h3>
                        <div id="gamificationDailyChallenge">
                            <!-- Daily challenge will be loaded here -->
                        </div>
                        
                        <button class="btn-success" style="width: 100%; margin-top: 15px;" onclick="claimDailyRewards()">
                            Claim Today's Reward
                        </button>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3 style="margin-bottom: 15px;">Leaderboard</h3>
                    <div class="card" style="padding: 20px;">
                        <table class="leaderboard-table" id="leaderboardTable">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>User</th>
                                    <th>Points</th>
                                    <th>Level</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboardBody">
                                <!-- Leaderboard will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3 style="margin-bottom: 15px;">Recent Points</h3>
                    <div id="recentPoints">
                        <!-- Recent points will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Resume Builder Section -->
        <div id="resumeSection" class="section">
            <div class="card">
                <button class="btn-secondary" onclick="showDashboard()" style="margin-bottom: 20px;">‚Üê Back to Dashboard</button>
                
                <div class="resume-builder">
                    <h2>Resume Builder üìÑ</h2>
                    <p style="color: #666; margin-bottom: 20px;">Generate a professional resume based on your learning progress</p>
                    
                    <div class="button-group" style="margin-bottom: 25px;">
                        <button class="btn-primary" onclick="generateResume()">
                            üé® Generate New Resume
                        </button>
                        <button class="btn-secondary" onclick="loadResumeTemplate('modern')">
                            Modern Template
                        </button>
                        <button class="btn-secondary" onclick="loadResumeTemplate('creative')">
                            Creative Template
                        </button>
                    </div>
                    
                    <div id="resumeLoading" class="loading" style="display: none;">
                        <div class="spinner"></div>
                        <p>Generating your professional resume...</p>
                    </div>
                    
                    <div id="resumePreviewContainer" style="display: none;">
                        <div class="resume-preview" id="resumePreview">
                            <!-- Resume preview will be loaded here -->
                        </div>
                        
                        <div class="resume-actions">
                            <button class="btn-success" onclick="downloadResume('pdf')">
                                üì• Download PDF
                            </button>
                            <button class="btn-info" onclick="downloadResume('doc')">
                                üìù Download Word
                            </button>
                            <button class="btn-warning" onclick="shareResume()">
                                üîó Share Link
                            </button>
                            <button class="btn-secondary" onclick="regenerateResume()">
                                üîÑ Regenerate
                            </button>
                        </div>
                    </div>
                    
                    <div id="resumeTips" style="margin-top: 30px; padding: 20px; background: #f8f9ff; border-radius: 8px;">
                        <h4 style="margin-bottom: 10px;">üí° Resume Tips</h4>
                        <ul style="color: #666; line-height: 1.6;">
                            <li>Include quantifiable achievements from your learning projects</li>
                            <li>Highlight skills with confidence scores above 70%</li>
                            <li>Add completed Taiken experiences as practical projects</li>
                            <li>Update your resume after every major milestone</li>
                            <li>Customize for each job application</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Section -->
        <div id="analyticsSection" class="section">
            <div class="card">
                <button class="btn-secondary" onclick="showDashboard()" style="margin-bottom: 20px;">‚Üê Back to Dashboard</button>
                
                <div class="analytics-dashboard">
                    <h2>Learning Analytics üìä</h2>
                    <p style="color: #666; margin-bottom: 20px;">Track your progress and identify areas for improvement</p>
                    
                    <!-- Time Selector -->
                    <div class="time-selector">
                        <button class="time-btn active" onclick="changeAnalyticsTime('week')">This Week</button>
                        <button class="time-btn" onclick="changeAnalyticsTime('month')">This Month</button>
                        <button class="time-btn" onclick="changeAnalyticsTime('quarter')">Last 3 Months</button>
                        <button class="time-btn" onclick="changeAnalyticsTime('all')">All Time</button>
                    </div>
                    
                    <!-- Key Metrics -->
                    <div class="analytics-grid">
                        <div class="metric-card">
                            <div class="metric-value" id="totalLearningHours">0</div>
                            <div class="metric-label">Total Learning Hours</div>
                            <div class="metric-change positive" id="learningHoursChange">+0%</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="completionRate">0%</div>
                            <div class="metric-label">Module Completion Rate</div>
                            <div class="metric-change positive" id="completionRateChange">+0%</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="skillGrowth">0%</div>
                            <div class="metric-label">Average Skill Growth</div>
                            <div class="metric-change positive" id="skillGrowthChange">+0%</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="consistencyScore">0%</div>
                            <div class="metric-label">Consistency Score</div>
                            <div class="metric-change positive" id="consistencyChange">+0%</div>
                        </div>
                    </div>
                    
                    <!-- Skill Progress -->
                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px;">Skill Progress</h3>
                        <div class="chart-container" id="skillProgressChart">
                            <div style="text-align: center; padding: 40px; color: #999;">
                                <p>Loading skill progress data...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Time Distribution -->
                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px;">Time Distribution</h3>
                        <div class="chart-container" id="timeDistributionChart">
                            <div style="text-align: center; padding: 40px; color: #999;">
                                <p>Loading time distribution data...</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recommendations -->
                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px;">Improvement Recommendations</h3>
                        <div id="analyticsRecommendations">
                            <!-- Recommendations will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Recommendations Section -->
        <div id="recommendationsSection" class="section">
            <div class="card">
                <button class="btn-secondary" onclick="showDashboard()" style="margin-bottom: 20px;">‚Üê Back to Dashboard</button>
                
                <h2>Personalized Recommendations üéØ</h2>
                <p style="color: #666; margin-bottom: 20px;">Content tailored to your learning goals and progress</p>
                
                <!-- Filter Bar -->
                <div style="display: flex; gap: 10px; margin-bottom: 25px; flex-wrap: wrap;">
                    <select id="recSkillFilter" class="select-control" style="flex: 1; min-width: 150px;" onchange="loadRecommendations()">
                        <option value="">All Skills</option>
                        <!-- Skills will be populated dynamically -->
                    </select>
                    <select id="recTypeFilter" class="select-control" style="flex: 1; min-width: 150px;" onchange="loadRecommendations()">
                        <option value="">All Types</option>
                        <option value="course">Courses</option>
                        <option value="video">Videos</option>
                        <option value="project">Projects</option>
                        <option value="taiken">Taikens</option>
                    </select>
                    <select id="recDifficultyFilter" class="select-control" style="flex: 1; min-width: 150px;" onchange="loadRecommendations()">
                        <option value="">All Difficulties</option>
                        <option value="beginner">Beginner</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                    <button class="btn-primary" onclick="loadRecommendations()" style="min-width: 100px;">
                        üîÑ Refresh
                    </button>
                </div>
                
                <!-- Recommendations Grid -->
                <div class="recommendations-grid" id="recommendationsGrid">
                    <!-- Recommendations will be loaded here -->
                </div>
                
                <!-- Loading State -->
                <div id="recommendationsLoading" class="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>Finding personalized recommendations for you...</p>
                </div>
                
                <!-- Empty State -->
                <div id="recommendationsEmpty" style="text-align: center; padding: 50px; display: none;">
                    <div style="font-size: 3em; margin-bottom: 20px;">üìö</div>
                    <h3 style="margin-bottom: 10px;">No recommendations yet</h3>
                    <p style="color: #666;">Complete some learning modules to get personalized recommendations!</p>
                    <button class="btn-primary" onclick="showLearningPaths()" style="margin-top: 20px;">
                        Start Learning ‚Üí
                    </button>
                </div>
            </div>
        </div>

        <!-- Complete Profile Section -->
        <div id="completeProfileSection" class="section">
            <div class="card">
                <button class="btn-secondary" onclick="showDashboard()" style="margin-bottom: 20px;">‚Üê Back to Dashboard</button>
                
                <div class="profile-complete-view">
                    <!-- Profile Header -->
                    <div class="profile-header-complete">
                        <img id="completeProfileAvatar" class="profile-avatar-xl" src="https://via.placeholder.com/150" alt="Profile">
                        <div class="profile-info-complete">
                            <h1 class="profile-name" id="completeProfileName">Loading...</h1>
                            <div class="profile-title" id="completeProfileTitle">Learner</div>
                            <div class="profile-bio-complete" id="completeProfileBio">Bio will appear here</div>
                            
                            <!-- Stats -->
                            <div class="profile-stats-complete">
                                <div class="profile-stat-item">
                                    <span class="profile-stat-value" id="profileTotalHours">0</span>
                                    <span class="profile-stat-label">Learning Hours</span>
                                </div>
                                <div class="profile-stat-item">
                                    <span class="profile-stat-value" id="profileSkillsCount">0</span>
                                    <span class="profile-stat-label">Skills</span>
                                </div>
                                <div class="profile-stat-item">
                                    <span class="profile-stat-value" id="profileModulesCompleted">0</span>
                                    <span class="profile-stat-label">Modules</span>
                                </div>
                                <div class="profile-stat-item">
                                    <span class="profile-stat-value" id="profilePoints">0</span>
                                    <span class="profile-stat-label">Points</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Profile Tabs -->
                    <div class="profile-tabs">
                        <button class="profile-tab active" onclick="switchProfileTab('skills')">Skills</button>
                        <button class="profile-tab" onclick="switchProfileTab('progress')">Progress</button>
                        <button class="profile-tab" onclick="switchProfileTab('achievements')">Achievements</button>
                        <button class="profile-tab" onclick="switchProfileTab('activity')">Activity</button>
                        <button class="profile-tab" onclick="switchProfileTab('settings')">Settings</button>
                    </div>
                    
                    <!-- Tab Content -->
                    <div class="profile-tab-content" id="profileTabContent">
                        <!-- Content will be loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
        KEEP ALL YOUR EXISTING SECTIONS BELOW
        (Goal Input, Loading, Journey Overview, Module Detail, etc.)
        ============================================ -->

        <!-- Goal Input Section (Existing) -->
        <div id="goalSection" class="card section">
            <h2>Start Your Learning Journey</h2>
            <p style="color: #666; margin-bottom: 20px;">Enter your career goal or paste a job description to get personalized learning modules.</p>
            <div class="input-group">
                <label for="careerGoal">Career Goal</label>
                <input type="text" id="careerGoal" placeholder="e.g., Become a Backend Developer, Become a Singer">
            </div>
            <div class="input-group">
                <label for="jobDesc">Job Description (Optional)</label>
                <textarea id="jobDesc" placeholder="Paste a job description for more personalized recommendations..."></textarea>
            </div>
            <div class="input-group">
                <label for="targetRole">Target Role for Job Search</label>
                <input type="text" id="targetRole" placeholder="e.g., Backend Developer, Frontend Engineer" value="Software Engineer">
            </div>
            <div class="button-group">
                <button class="btn-primary" onclick="startJourney()">üöÄ Start Journey</button>
                <button class="btn-secondary" onclick="viewJobs()">üíº View Jobs</button>
            </div>
        </div>

        <!-- Loading Section (Existing) -->
        <div id="loadingSection" class="card section">
            <div class="loading">
                <div class="spinner"></div>
                <p>Analyzing your goal and creating personalized modules...</p>
            </div>
        </div>

        <!-- Journey Overview Section (Existing) -->
        <div id="journeySection" class="card section">
            <h2 id="journeyTitle">Learning Path</h2>
            <div style="margin: 20px 0;">
                <h3 style="margin-bottom: 15px;">üìö Skills to Master</h3>
                <div id="skillsList"></div>
            </div>
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-value" id="totalModulesCount">0</div>
                    <div class="stat-label">Total Modules</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="totalHoursCount">0</div>
                    <div class="stat-label">Hours to Complete</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="progressCount">0%</div>
                    <div class="stat-label">Overall Progress</div>
                </div>
            </div>
            <h3 style="margin-top: 30px; margin-bottom: 15px;">üìñ Learning Modules</h3>
            <div id="modulesList"></div>
        </div>

        <!-- Module Detail Section (Existing) -->
        <div id="moduleDetailSection" class="card section">
            <button class="btn-secondary" onclick="backToJourney()" style="margin-bottom: 20px;">‚Üê Back to Modules</button>
            <div class="breadcrumb">
                <div class="breadcrumb-item" onclick="backToJourney()">Skills</div>
                <div class="breadcrumb-item" id="currentSkillBreadcrumb">Skill</div>
                <div class="breadcrumb-item active" id="currentModuleBreadcrumb">Module</div>
            </div>
            <h2 id="moduleTitle">Module Title</h2>
            <p id="moduleDescription" style="color: #666; margin: 15px 0;"></p>
            <h3 style="margin: 25px 0 15px 0;">üìã Learning Objectives</h3>
            <ul id="objectivesList" style="margin-left: 20px; color: #666;"></ul>
            <h3 style="margin: 25px 0 15px 0;">‚úÖ Actions to Complete</h3>
            <div id="actionsList"></div>
            <div class="button-group" style="margin-top: 30px;">
                <button class="btn-secondary" onclick="backToJourney()">‚Üê Back</button>
                <button class="btn-primary" onclick="nextModule()" id="nextModuleBtn">Next Module ‚Üí</button>
            </div>
        </div>

        <!-- Checkpoint Modal (Existing) -->
        <div id="checkpointModal" class="modal">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('checkpointModal')">&times;</span>
                <h2 class="modal-title">üìù Module Checkpoint</h2>
                <p class="modal-subtitle">Answer these questions to unlock the next module</p>
                <div id="checkpointQuestions"></div>
                <div class="button-group">
                    <button class="btn-secondary" onclick="closeModal('checkpointModal')">Cancel</button>
                    <button class="btn-primary" onclick="submitCheckpoint()" id="submitCheckpointBtn">Submit Answers</button>
                </div>
            </div>
        </div>

        <!-- Results Modal (Existing) -->
        <div id="resultsModal" class="modal">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('resultsModal')">&times;</span>
                <h2 class="modal-title" id="resultsTitle">Results</h2>
                <div id="resultsContent"></div>
                <button class="btn-primary" onclick="closeModal('resultsModal')" style="width: 100%; margin-top: 20px;">Continue</button>
            </div>
        </div>

        <!-- Job Recommendations Section (Existing) -->
        <div id="jobsSection" class="card section" style="display: none;">
            <button class="btn-secondary" onclick="backToHome()" style="margin-bottom: 20px;">‚Üê Back to Home</button>
            
            <h2>üíº Job Recommendations</h2>
            <p style="color: #666; margin-bottom: 20px;">Jobs matching your current skills</p>
            
            <div id="jobsList"></div>
        </div>

        <!-- Modals (Existing - Keep these at the end) -->
        <div id="signinModal" class="modal">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('signinModal')">&times;</span>
                <h2 class="modal-title">Welcome Back</h2>
                <p class="modal-subtitle">Sign in to continue your learning journey</p>
                <div id="signinError" class="alert alert-error" style="display: none;"></div>
                <div class="input-group">
                    <label for="signinEmail">Email</label>
                    <input type="email" id="signinEmail" placeholder="you@example.com">
                </div>
                <div class="input-group">
                    <label for="signinPassword">Password</label>
                    <input type="password" id="signinPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button class="btn-primary" onclick="signIn()" style="width: 100%;">Sign In</button>
                <div class="divider"><span>or</span></div>
                <div class="oauth-buttons">
                    <button class="btn-oauth" onclick="signInOAuth('google')">
                        <span>üîµ</span> Continue with Google
                    </button>
                    <button class="btn-oauth" onclick="signInOAuth('github')">
                        <span>‚ö´</span> Continue with GitHub
                    </button>
                </div>
                <div class="link-text">
                    Don't have an account? <a onclick="switchModal('signinModal', 'signupModal')">Sign up</a>
                </div>
            </div>
        </div>

        <div id="signupModal" class="modal">
            <div class="modal-content">
                <span class="modal-close" onclick="closeModal('signupModal')">&times;</span>
                <h2 class="modal-title">Create Account</h2>
                <p class="modal-subtitle">Start your personalized learning path</p>
                <div id="signupError" class="alert alert-error" style="display: none;"></div>
                <div class="input-group">
                    <label for="signupUsername">Username</label>
                    <input type="text" id="signupUsername" placeholder="johndoe">
                </div>
                <div class="input-group">
                    <label for="signupEmail">Email</label>
                    <input type="email" id="signupEmail" placeholder="you@example.com">
                </div>
                <div class="input-group">
                    <label for="signupPassword">Password</label>
                    <input type="password" id="signupPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button class="btn-primary" onclick="signUp()" style="width: 100%;">Create Account</button>
                <div class="divider"><span>or</span></div>
                <div class="oauth-buttons">
                    <button class="btn-oauth" onclick="signInOAuth('google')">
                        <span>üîµ</span> Continue with Google
                    </button>
                    <button class="btn-oauth" onclick="signInOAuth('github')">
                        <span>‚ö´</span> Continue with GitHub
                    </button>
                </div>
                <div class="link-text">
                    Already have an account? <a onclick="switchModal('signupModal', 'signinModal')">Sign in</a>
                </div>
            </div>
        </div>

        <!-- Floating Action Button -->
        <div class="fab" onclick="showQuickActions()" id="fabButton">
            
        </div>
    </div>

    <script>
        // ============================================
        // IMPROVED API CONNECTION WITH ERROR HANDLING
        // ============================================

        // API Configuration
        const API_URL = window.location.hostname === 'localhost' 
            ? 'http://localhost:8000' 
            : window.location.origin;

        console.log('[CONFIG] API URL:', API_URL);

        // Global variables
        let currentUser = null;
        let authToken = null;
        let currentSessionId = null;
        let currentSkill = null;
        let currentModule = null;
        let learningPaths = {};
        let currentModuleData = null;
        let checkpointAnswers = [];
        let currentOnboardingStep = 1;
        let userSkills = [];
        let analyticsTimeRange = 'week';

        // API Helper Function with Better Error Handling
        async function apiCall(endpoint, options = {}) {
            const url = `${API_URL}${endpoint}`;
            
            // Default headers
            const headers = {
                'Content-Type': 'application/json',
                ...options.headers
            };
            
            // Add auth token if available
            if (authToken && !options.skipAuth) {
                headers['Authorization'] = `Bearer ${authToken}`;
            }
            
            const config = {
                ...options,
                headers
            };
            
            console.log(`[API] ${options.method || 'GET'} ${endpoint}`);
            
            try {
                const response = await fetch(url, config);
                
                // Handle different status codes
                if (response.status === 401) {
                    console.warn('[API] Unauthorized - clearing auth');
                    clearAuth();
                    throw new Error('Session expired. Please sign in again.');
                }
                
                if (response.status === 404) {
                    throw new Error('Resource not found');
                }
                
                if (response.status === 500) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error || 'Server error occurred');
                }
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.detail || errorData.error || `HTTP ${response.status}`);
                }
                
                const data = await response.json();
                console.log(`[API] ‚úÖ Success:`, endpoint);
                return data;
                
            } catch (error) {
                console.error(`[API] ‚ùå Error on ${endpoint}:`, error);
                
                // Handle network errors
                if (error.message === 'Failed to fetch') {
                    throw new Error('Cannot connect to server. Please check if the backend is running.');
                }
                
                throw error;
            }
        }

        // Clear authentication
        function clearAuth() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('auth_token');
            localStorage.removeItem('user_data');
            updateNavbar(false);
        }

        // Show error helper
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            if (errorElement) {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
                
                // Auto-hide after 5 seconds
                setTimeout(() => {
                    errorElement.style.display = 'none';
                }, 5000);
            }
        }

        // Show error message as toast
        function showErrorMessage(message, title = 'Error') {
            const errorHtml = `
                <div style="position: fixed; top: 20px; right: 20px; background: #fee; 
                            border: 2px solid #f56565; border-radius: 8px; padding: 15px 20px; 
                            max-width: 400px; z-index: 9999; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">
                    <div style="font-weight: 600; color: #7f1d1d; margin-bottom: 5px;">${title}</div>
                    <div style="color: #991b1b; font-size: 0.95em;">${message}</div>
                    <button onclick="this.parentElement.remove()" 
                            style="position: absolute; top: 5px; right: 10px; background: none; 
                                   border: none; font-size: 1.2em; cursor: pointer; color: #7f1d1d;">√ó</button>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', errorHtml);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                const errorElements = document.querySelectorAll('[style*="position: fixed"]');
                errorElements.forEach(el => el.remove());
            }, 5000);
        }

        // Show success message as toast
        function showSuccessMessage(message, title = 'Success') {
            const successHtml = `
                <div style="position: fixed; top: 20px; right: 20px; background: #f0fdf4; 
                            border: 2px solid #48bb78; border-radius: 8px; padding: 15px 20px; 
                            max-width: 400px; z-index: 9999; box-shadow: 0 4px 12px rgba(0,0,0,0.2);">
                    <div style="font-weight: 600; color: #065f46; margin-bottom: 5px;">${title}</div>
                    <div style="color: #047857; font-size: 0.95em;">${message}</div>
                    <button onclick="this.parentElement.remove()" 
                            style="position: absolute; top: 5px; right: 10px; background: none; 
                                   border: none; font-size: 1.2em; cursor: pointer; color: #065f46;">√ó</button>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', successHtml);
            
            setTimeout(() => {
                const successElements = document.querySelectorAll('[style*="f0fdf4"]');
                successElements.forEach(el => el.remove());
            }, 3000);
        }

        // ============================================
        // IMPROVED AUTH FUNCTIONS
        // ============================================

        async function signUp() {
            const username = document.getElementById('signupUsername').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            
            // Validation
            if (!username || !email || !password) {
                showError('signupError', 'All fields are required');
                return;
            }
            
            if (password.length < 6) {
                showError('signupError', 'Password must be at least 6 characters');
                return;
            }
            
            try {
                const data = await apiCall('/auth/signup', {
                    method: 'POST',
                    skipAuth: true,
                    body: JSON.stringify({ username, email, password })
                });
                
                if (data.success) {
                    // Store auth data
                    authToken = data.access_token;
                    currentUser = data.user;
                    localStorage.setItem('auth_token', authToken);
                    localStorage.setItem('user_data', JSON.stringify(currentUser));
                    
                    // Update UI
                    closeModal('signupModal');
                    updateNavbar(true);
                    showDashboard();
                    loadDashboard();
                    
                    // Show welcome message
                    showSuccessMessage(`Welcome ${username}! Let's start your learning journey.`, 'Welcome');
                } else {
                    showError('signupError', data.error || 'Signup failed');
                }
                
            } catch (error) {
                showError('signupError', error.message);
            }
        }

        async function signIn() {
            const email = document.getElementById('signinEmail').value.trim();
            const password = document.getElementById('signinPassword').value;
            
            if (!email || !password) {
                showError('signinError', 'Email and password are required');
                return;
            }
            
            try {
                const data = await apiCall('/auth/signin', {
                    method: 'POST',
                    skipAuth: true,
                    body: JSON.stringify({ email, password })
                });
                
                if (data.success) {
                    authToken = data.access_token;
                    currentUser = data.user;
                    localStorage.setItem('auth_token', authToken);
                    localStorage.setItem('user_data', JSON.stringify(currentUser));
                    
                    closeModal('signinModal');
                    updateNavbar(true);
                    showDashboard();
                    loadDashboard();
                    
                    showSuccessMessage(`Welcome back, ${currentUser.username || 'User'}!`, 'Welcome');
                } else {
                    showError('signinError', data.error || 'Invalid credentials');
                }
                
            } catch (error) {
                showError('signinError', error.message);
            }
        }

        async function signOut() {
            try {
                await apiCall('/auth/signout', { method: 'POST' });
            } catch (error) {
                console.warn('[AUTH] Signout API call failed:', error);
            } finally {
                clearAuth();
                showSection('goalSection');
                showSuccessMessage('You have been signed out', 'Goodbye');
            }
        }

        // Check authentication state on page load
        function checkAuthState() {
            authToken = localStorage.getItem('auth_token');
            const userDataStr = localStorage.getItem('user_data');
            
            if (authToken && userDataStr) {
                currentUser = JSON.parse(userDataStr);
                updateNavbar(true);
                loadDashboard();
                checkOnboardingStatus();
            } else {
                updateNavbar(false);
                showSection('goalSection');
            }
        }

        // ============================================
        // CONNECTION TEST ON LOAD
        // ============================================

        window.addEventListener('load', async function() {
            console.log('[APP] Application loaded');
            
            // Test API connection
            try {
                const healthCheck = await fetch(`${API_URL}/health`);
                const health = await healthCheck.json();
                console.log('[API] Health check:', health);
                
                if (health.status === 'healthy') {
                    console.log('‚úÖ Backend connection successful');
                }
            } catch (error) {
                console.error('‚ùå Backend connection failed:', error);
                showErrorMessage(
                    'Cannot connect to backend server. Please ensure it is running on port 8000.',
                    'Connection Error'
                );
            }
            
            // Check auth state
            checkAuthState();
        });

        // Add keyboard shortcuts for development
        if (window.location.hostname === 'localhost') {
            document.addEventListener('keydown', function(e) {
                // Ctrl+Shift+D = Test connection
                if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                    console.log('[DEBUG] Testing API connection...');
                    fetch(`${API_URL}/test`)
                        .then(r => r.json())
                        .then(d => console.log('[DEBUG] Test result:', d))
                        .catch(e => console.error('[DEBUG] Test failed:', e));
                }
            });
        }

        function updateNavbar(isLoggedIn) {
            const navbarActions = document.getElementById('navbarActions');
            
            if (isLoggedIn && currentUser) {
                navbarActions.innerHTML = `
                    <div class="user-menu" onclick="toggleUserMenu(event)">
                        <img class="user-avatar" src="${currentUser.profile?.profile_pic || 'https://via.placeholder.com/40'}" alt="User">
                        <span class="user-name">${currentUser.username || 'User'}</span>
                        <span>‚ñº</span>
                    </div>
                    <div class="dropdown-menu" id="userDropdown">
                        <div class="dropdown-item" onclick="showCompleteProfile()">üë§ My Profile</div>
                        <div class="dropdown-item" onclick="showGamification()">üèÜ Points & Achievements</div>
                        <div class="dropdown-item" onclick="showAnalytics()">üìä Analytics</div>
                        <div class="dropdown-item" onclick="showResumeBuilder()">üìÑ Resume</div>
                        <div class="dropdown-item" onclick="signOut()">üö™ Sign Out</div>
                    </div>
                `;
            } else {
                navbarActions.innerHTML = `
                    <button class="btn-nav btn-signin" onclick="openModal('signinModal')">Sign In</button>
                    <button class="btn-nav btn-signup" onclick="openModal('signupModal')">Sign Up</button>
                `;
            }
        }

        function toggleUserMenu(event) {
            event.stopPropagation();
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }

        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('userDropdown');
            if (dropdown && !event.target.closest('.user-menu')) {
                dropdown.classList.remove('active');
            }
        });

        // ============================================
        // MODAL & SECTION MANAGEMENT
        // ============================================

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.add('active');
                modal.style.display = 'flex';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                modal.style.display = 'none';
            }
        }

        function switchModal(fromModalId, toModalId) {
            closeModal(fromModalId);
            openModal(toModalId);
        }

        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.style.display = 'none';
                section.classList.remove('active');
            });

            // Show the target section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.style.display = 'block';
                targetSection.classList.add('active');
            }
        }

        function showDashboard() {
            showSection('dashboardSection');
        }

        function showOnboarding() {
            const badge = document.getElementById('onboardingBadge');
            if (badge) {
                badge.style.display = 'none';
            }
            currentOnboardingStep = 1;
            updateOnboardingSteps();
            loadSuggestedSkills();
            showSection('onboardingSection');
        }

        function showLearningPaths() {
            showSection('journeySection');
        }

        function showGamification() {
            showSection('gamificationSection');
        }

        function showResumeBuilder() {
            showSection('resumeSection');
        }

        function showAnalytics() {
            showSection('analyticsSection');
        }

        function showContentRecommendations() {
            showSection('recommendationsSection');
            loadRecommendations();
        }

        function showCompleteProfile() {
            showSection('completeProfileSection');
            loadCompleteProfile();
        }

        function showJobRecommendations() {
            showSection('jobsSection');
            loadJobRecommendations();
        }

        // ============================================
        // NEW: DASHBOARD FUNCTIONS
        // ============================================

        async function loadDashboard() {
            if (!currentUser) return;
            
            try {
                // Load quick stats
                await loadQuickStats();
                
                // Load recent activity
                await loadRecentActivity();
                
                // Load next steps
                await loadNextSteps();
                
                // Load right panel stats
                await loadRightPanelStats();
                
                // Load daily challenge
                await loadDailyChallenge();
                
            } catch (error) {
                console.error('Error loading dashboard:', error);
            }
        }

        async function loadQuickStats() {
            try {
                const [skillsData, gamificationData] = await Promise.all([
                    apiCall('/api/analytics/skills'),
                    apiCall('/api/gamification/summary')
                ]);
                
                const quickStats = document.getElementById('quickStats');
                if (quickStats) {
                    quickStats.innerHTML = `
                        <div class="stat-box">
                            <div class="stat-value">${skillsData.total_skills || 0}</div>
                            <div class="stat-label">Total Skills</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">${gamificationData.summary?.points_summary?.total_points || 0}</div>
                            <div class="stat-label">Plaro Points</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">${skillsData.mastered_skills || 0}</div>
                            <div class="stat-label">Skills Mastered</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">${gamificationData.summary?.streak || 0}</div>
                            <div class="stat-label">Day Streak</div>
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('[DASHBOARD] Error loading quick stats:', error);
                showErrorMessage(error.message, 'Stats Loading Error');
            }
        }

        async function loadRecentActivity() {
            try {
                const data = await apiCall(`/auth/profile/${currentUser.id}`);
                
                const recentActivity = document.getElementById('recentActivity');
                if (recentActivity && data.active_sessions) {
                    let html = '';
                    data.active_sessions.slice(0, 3).forEach(session => {
                        const parsed = session.jd_parsed || {};
                        const skillCount = Object.keys(parsed.learning_paths || {}).length;
                        
                        html += `
                            <div class="module-card active" style="margin-bottom: 10px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600; margin-bottom: 5px;">
                                            ${session.jd_text?.substring(0, 40) || 'Learning Path'}...
                                        </div>
                                        <div style="color: #666; font-size: 0.9em;">
                                            ${skillCount} skills ‚Ä¢ Started ${new Date(session.created_at).toLocaleDateString()}
                                        </div>
                                    </div>
                                    <button class="btn-primary" onclick="loadSession('${session.id}')">
                                        Continue ‚Üí
                                    </button>
                                </div>
                            </div>
                        `;
                    });
                    
                    if (html === '') {
                        html = '<p style="color: #999; text-align: center;">No recent activity yet</p>';
                    }
                    
                    recentActivity.innerHTML = html;
                }
                
            } catch (error) {
                console.error('Error loading recent activity:', error);
            }
        }

        async function loadNextSteps() {
            try {
                const nextSteps = document.getElementById('nextSteps');
                if (!nextSteps) return;
                
                // Check if user has completed onboarding
                const onboardingResponse = await fetch(`${API_URL}/api/onboarding/status`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const onboardingData = await onboardingResponse.json();
                
                if (!onboardingData.onboarding?.completed) {
                    nextSteps.innerHTML = `
                        <div class="card" style="background: #f0fdf4; padding: 20px;">
                            <h4 style="margin-bottom: 10px;">Complete Your Profile üöÄ</h4>
                            <p style="color: #666; margin-bottom: 15px;">Finish onboarding to get personalized recommendations</p>
                            <button class="btn-success" onclick="showOnboarding()">
                                Complete Onboarding ‚Üí
                            </button>
                        </div>
                    `;
                    return;
                }
                
                // Check for pending recommendations
                const recommendationsResponse = await fetch(`${API_URL}/api/content/recommend`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        skill: userSkills[0]?.skill_name || 'Python',
                        content_type: 'course'
                    })
                });
                
                const recommendationsData = await recommendationsResponse.json();
                
                if (recommendationsData.recommendations?.length > 0) {
                    nextSteps.innerHTML = `
                        <div class="card" style="background: #f0f9ff; padding: 20px;">
                            <h4 style="margin-bottom: 10px;">Recommended Content üìö</h4>
                            <p style="color: #666; margin-bottom: 15px;">We found ${recommendationsData.recommendations.length} new recommendations for you</p>
                            <button class="btn-info" onclick="showContentRecommendations()">
                                View Recommendations ‚Üí
                            </button>
                        </div>
                    `;
                } else {
                    nextSteps.innerHTML = `
                        <div class="card" style="background: #fffbf0; padding: 20px;">
                            <h4 style="margin-bottom: 10px;">Start Your First Journey üéØ</h4>
                            <p style="color: #666; margin-bottom: 15px;">Set a career goal and begin your learning path</p>
                            <button class="btn-warning" onclick="showSection('goalSection')">
                                Set Career Goal ‚Üí
                            </button>
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('Error loading next steps:', error);
            }
        }

        async function loadRightPanelStats() {
            try {
                // Load learning analytics
                const analyticsResponse = await fetch(`${API_URL}/api/analytics/learning`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const analyticsData = await analyticsResponse.json();
                
                const rightPanelStats = document.getElementById('rightPanelStats');
                if (rightPanelStats) {
                    rightPanelStats.innerHTML = `
                        <div class="quick-stat-item">
                            <span class="stat-label">Learning Hours</span>
                            <span class="stat-value">${analyticsData.analytics?.total_learning_time_hours || 0}</span>
                        </div>
                        <div class="quick-stat-item">
                            <span class="stat-label">Modules Completed</span>
                            <span class="stat-value">${analyticsData.analytics?.total_modules_completed || 0}</span>
                        </div>
                        <div class="quick-stat-item">
                            <span class="stat-label">Skill Growth</span>
                            <span class="stat-value">${analyticsData.analytics?.skill_growth_trend?.length || 0}</span>
                        </div>
                        <div class="quick-stat-item">
                            <span class="stat-label">Consistency</span>
                            <span class="stat-value">${Math.round((analyticsData.analytics?.consistency_score || 0) * 100)}%</span>
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('Error loading right panel stats:', error);
            }
        }

        async function loadDailyChallenge() {
            try {
                const gamificationResponse = await fetch(`${API_URL}/api/gamification/summary`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const gamificationData = await gamificationResponse.json();
                
                const dailyChallenge = document.getElementById('dailyChallenge');
                if (dailyChallenge) {
                    const challenge = gamificationData.summary?.daily_challenge || {};
                    const progress = challenge.progress || 0;
                    const total = challenge.total || 3;
                    const percentage = challenge.percentage || 0;
                    
                    dailyChallenge.innerHTML = `
                        <div style="margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="font-weight: 500;">Daily Progress</span>
                                <span style="color: #667eea;">${progress}/${total}</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${percentage}%"></div>
                            </div>
                        </div>
                        <div style="font-size: 0.9em; color: #666;">
                            <div style="margin-bottom: 5px;">‚úì Complete a module</div>
                            <div style="margin-bottom: 5px;">‚úì Practice a skill</div>
                            <div>‚úì Engage with content</div>
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error('Error loading daily challenge:', error);
            }
        }


        // ============================================
        // STUB FUNCTIONS - Recommendations & Profile
        // ============================================

        async function loadCompleteProfile() {
            try {
                const userData = await apiCall(`/auth/profile/${currentUser.id}`);
                
                // Update profile header
                document.getElementById('completeProfileAvatar').src = userData.profile?.profile_pic || 'https://via.placeholder.com/150';
                document.getElementById('completeProfileName').textContent = userData.username || 'User';
                document.getElementById('completeProfileBio').textContent = userData.profile?.bio || 'No bio added yet';
                
                // Update stats
                document.getElementById('profileTotalHours').textContent = userData.analytics?.total_hours || '0';
                document.getElementById('profileSkillsCount').textContent = userData.skills?.length || '0';
                document.getElementById('profileModulesCompleted').textContent = userData.analytics?.modules_completed || '0';
                document.getElementById('profilePoints').textContent = userData.gamification?.points || '0';
                
            } catch (error) {
                console.error('[PROFILE] Error loading profile:', error);
            }
        }

        async function loadJobRecommendations() {
            try {
                // Get user's career goal and default location
                const targetRole = document.getElementById('targetRole')?.value || 'Software Engineer';
                const location = 'Chennai'; // Default location
                
                console.log('[JOBS] Loading recommendations for:', targetRole);
                
                // Call correct endpoint with required parameters
                const jobs = await apiCall(`/agent/jobs/recommendations?user_id=${currentUser.id}&target_role=${encodeURIComponent(targetRole)}&location=${encodeURIComponent(location)}`);
                
                const jobsList = document.getElementById('jobsList');
                if (!jobsList) {
                    console.warn('[JOBS] jobsList element not found');
                    return;
                }
                
                if (jobs.success && jobs.jobs && jobs.jobs.length > 0) {
                    jobsList.innerHTML = jobs.jobs.map(job => `
                        <div class="card" style="margin-bottom: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0 0 5px 0;">${job.title || 'Job Title'}</h4>
                                    <p style="color: #666; margin: 5px 0;">${job.company || 'Company'}</p>
                                    <div style="display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap;">
                                        ${job.matched_skills?.slice(0, 3).map(skill => 
                                            `<span class="skill-chip">${skill}</span>`
                                        ).join('') || '<span style="color: #999; font-size: 0.9em;">No skills listed</span>'}
                                    </div>
                                    ${job.match_percentage ? `<div style="margin-top: 8px; font-size: 0.85em; color: #48bb78;">Match: ${Math.round(job.match_percentage)}%</div>` : ''}
                                </div>
                                <button class="btn-primary" onclick="window.open('${job.url || '#'}', '_blank')" ${!job.url ? 'disabled' : ''}>
                                    View Job
                                </button>
                            </div>
                        </div>
                    `).join('');
                    console.log('[JOBS] Successfully loaded', jobs.jobs.length, 'jobs');
                } else {
                    jobsList.innerHTML = '<p style="color: #999; text-align: center; padding: 20px;">No jobs found matching your profile</p>';
                    console.log('[JOBS] No jobs returned from API');
                }
            } catch (error) {
                console.error('[JOBS] Error loading jobs:', error);
                const jobsList = document.getElementById('jobsList');
                if (jobsList) {
                    jobsList.innerHTML = `<p style="color: #d32f2f; padding: 20px;">Error loading jobs: ${error.message}</p>`;
                }
            }
        }

        function switchProfileTab(tabName) {
            // Update active tab buttons
            const tabs = document.querySelectorAll('.profile-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update content based on tab
            const tabContent = document.getElementById('profileTabContent');
            if (tabContent) {
                switch(tabName) {
                    case 'skills':
                        fetchSkillsForTab();
                        break;
                    case 'progress':
                        fetchProgressForTab();
                        break;
                    case 'achievements':
                        fetchAchievementsForTab();
                        break;
                    case 'activity':
                        fetchActivityForTab();
                        break;
                    case 'settings':
                        tabContent.innerHTML = '<div class="loading"><p>Loading settings...</p></div>';
                        // Settings tab will be populated by updateProfileSettings() when user interacts
                        break;
                }
            }
        }

        // ============================================
        // NEW: ONBOARDING FUNCTIONS
        // ============================================

        async function checkOnboardingStatus() {
            try {
                const data = await apiCall('/api/onboarding/status');
                
                if (!data.onboarding?.completed) {
                    // Show onboarding badge
                    const badge = document.getElementById('onboardingBadge');
                    if (badge) {
                        badge.style.display = 'block';
                    }
                    
                    // If user hasn't started onboarding, prompt them
                    if (data.onboarding?.step === 0) {
                        setTimeout(() => {
                            if (confirm('Welcome to PEARL! Would you like to complete your onboarding to get personalized recommendations?')) {
                                showOnboarding();
                            }
                        }, 1000);
                    }
                }
                
            } catch (error) {
                console.error('[ONBOARDING] Error checking onboarding status:', error);
            }
        }

        function updateOnboardingSteps() {
            // Update all steps
            for (let i = 1; i <= 5; i++) {
                const stepElement = document.getElementById(`step${i}`);
                const stepContent = document.getElementById(`onboardingStep${i}`);
                
                if (stepElement) {
                    stepElement.classList.remove('active', 'completed');
                    if (i < currentOnboardingStep) {
                        stepElement.classList.add('completed');
                    } else if (i === currentOnboardingStep) {
                        stepElement.classList.add('active');
                    }
                }
                
                if (stepContent) {
                    stepContent.style.display = i === currentOnboardingStep ? 'block' : 'none';
                }
            }
        }

        function nextOnboardingStep() {
            if (currentOnboardingStep < 5) {
                currentOnboardingStep++;
                updateOnboardingSteps();
                
                // Update summary on step 5
                if (currentOnboardingStep === 5) {
                    updateOnboardingSummary();
                }
            }
        }

        function prevOnboardingStep() {
            if (currentOnboardingStep > 1) {
                currentOnboardingStep--;
                updateOnboardingSteps();
            }
        }

        function setConfidence(level) {
            document.getElementById('confidenceBaseline').value = level;
            
            // Update button states
            const buttons = document.querySelectorAll('.time-btn');
            buttons.forEach(btn => {
                if (btn.textContent.includes(level.toString())) {
                    btn.classList.add('active');
                    btn.style.background = '#667eea';
                    btn.style.color = 'white';
                } else {
                    btn.classList.remove('active');
                    btn.style.background = '';
                    btn.style.color = '';
                }
            });
        }

        function addSkill() {
            const skillInput = document.getElementById('skillInput');
            const skill = skillInput.value.trim();
            
            if (skill && !userSkills.includes(skill)) {
                userSkills.push(skill);
                updateSkillTags();
                skillInput.value = '';
            }
        }

        function removeSkill(skill) {
            userSkills = userSkills.filter(s => s !== skill);
            updateSkillTags();
        }

        function updateSkillTags() {
            const container = document.getElementById('skillTagsContainer');
            container.innerHTML = '';
            
            userSkills.forEach(skill => {
                const tag = document.createElement('div');
                tag.className = 'skill-tag';
                tag.innerHTML = `
                    ${skill}
                    <span class="remove-skill" onclick="removeSkill('${skill}')">√ó</span>
                `;
                container.appendChild(tag);
            });
        }

        async function loadSuggestedSkills() {
            try {
                const suggestedSkills = document.getElementById('suggestedSkills');
                if (!suggestedSkills) return;
                
                // Get common skills based on career goal
                const careerGoal = document.getElementById('careerGoal')?.value || 'Software Developer';
                
                const commonSkills = {
                    'backend': ['Python', 'SQL', 'REST APIs', 'Git', 'Docker', 'AWS'],
                    'frontend': ['JavaScript', 'React', 'CSS', 'HTML', 'TypeScript', 'UI/UX'],
                    'data': ['Python', 'SQL', 'Statistics', 'Data Analysis', 'Machine Learning'],
                    'design': ['Figma', 'UI/UX Design', 'Prototyping', 'User Research', 'Wireframing']
                };
                
                let skills = [];
                const goalLower = careerGoal.toLowerCase();
                
                if (goalLower.includes('backend')) skills = commonSkills.backend;
                else if (goalLower.includes('frontend')) skills = commonSkills.frontend;
                else if (goalLower.includes('data')) skills = commonSkills.data;
                else if (goalLower.includes('design')) skills = commonSkills.design;
                else skills = [...commonSkills.backend, ...commonSkills.frontend].slice(0, 6);
                
                suggestedSkills.innerHTML = skills.map(skill => `
                    <button class="skill-chip" onclick="addSuggestedSkill('${skill}')">
                        ${skill}
                    </button>
                `).join('');
                
            } catch (error) {
                console.error('Error loading suggested skills:', error);
            }
        }

        function addSuggestedSkill(skill) {
            if (!userSkills.includes(skill)) {
                userSkills.push(skill);
                updateSkillTags();
            }
        }

        function updateOnboardingSummary() {
            const summary = document.getElementById('onboardingSummary');
            if (!summary) return;
            
            const currentStatus = document.getElementById('currentStatus').value;
            const fieldOfStudy = document.getElementById('fieldOfStudy').value;
            const careerGoal = document.getElementById('careerGoal').value;
            const targetRole = document.getElementById('targetRole').value;
            const shortTermGoal = document.getElementById('shortTermGoal').value;
            const timeAvailability = document.getElementById('timeAvailability').value;
            const learningPreference = document.getElementById('learningPreference').value;
            const confidenceBaseline = document.getElementById('confidenceBaseline').value;
            
            summary.innerHTML = `
                <div style="margin-bottom: 15px;">
                    <strong>Current Status:</strong> ${currentStatus}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Field:</strong> ${fieldOfStudy}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Career Goal:</strong> ${careerGoal}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Target Role:</strong> ${targetRole}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Skills to Learn:</strong> ${userSkills.slice(0, 5).join(', ')}${userSkills.length > 5 ? '...' : ''}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Time Commitment:</strong> ${timeAvailability}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>Learning Style:</strong> ${learningPreference}
                </div>
                <div>
                    <strong>Confidence Level:</strong> ${confidenceBaseline}/5
                </div>
            `;
        }

        async function completeOnboarding() {
            try {
                const onboardingData = {
                    primary_career_goal: document.getElementById('careerGoal').value,
                    target_role: document.getElementById('targetRole').value,
                    current_status: document.getElementById('currentStatus').value,
                    skills: userSkills,
                    time_availability: document.getElementById('timeAvailability').value,
                    learning_preference: document.getElementById('learningPreference').value,
                    short_term_goal: document.getElementById('shortTermGoal').value,
                    constraint_free_only: document.getElementById('constraintFreeOnly').checked,
                    constraint_heavy_workload: document.getElementById('constraintHeavyWorkload').checked,
                    confidence_baseline: parseInt(document.getElementById('confidenceBaseline').value)
                };
                
                const response = await fetch(`${API_URL}/api/onboarding/start`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(onboardingData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Show success message
                    const successMessage = document.getElementById('onboardingSuccess');
                    const completeButton = document.getElementById('completeOnboardingBtn');
                    
                    if (successMessage) successMessage.style.display = 'block';
                    if (completeButton) completeButton.disabled = true;
                    
                    // Redirect to dashboard after 2 seconds
                    setTimeout(() => {
                        showDashboard();
                        loadDashboard(); // Refresh dashboard data
                    }, 2000);
                } else {
                    alert('Onboarding failed: ' + (data.error || 'Unknown error'));
                }
                
            } catch (error) {
                console.error('Error completing onboarding:', error);
                alert('Failed to complete onboarding. Please try again.');
            }
        }

        // ============================================
        // NEW: GAMIFICATION FUNCTIONS
        // ============================================

        async function showGamification() {
            try {
                // Load gamification data
                const response = await fetch(`${API_URL}/api/gamification/summary`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                // Update points display
                document.getElementById('totalPoints').textContent = 
                    data.summary?.points_summary?.total_points || 0;
                
                document.getElementById('streakCount').textContent = 
                    data.summary?.streak || 0;
                
                document.getElementById('rankLevel').textContent = 
                    data.summary?.points_summary?.rank_level || 'Beginner';
                
                document.getElementById('achievementsCount').textContent = 
                    data.summary?.recent_achievements?.length || 0;
                
                document.getElementById('leaderboardRank').textContent = 
                    data.summary?.leaderboard_position || '-';
                
                // Load leaderboard
                await loadLeaderboard();
                
                // Load achievements
                loadAchievements(data.summary?.recent_achievements || []);
                
                // Load daily challenge for gamification section
                loadGamificationDailyChallenge(data.summary?.daily_challenge || {});
                
                // Load recent points
                loadRecentPoints(data.summary?.points_summary?.recent_transactions || []);
                
                showSection('gamificationSection');
                
            } catch (error) {
                console.error('Error loading gamification:', error);
                showSection('gamificationSection');
            }
        }

        async function loadLeaderboard() {
            try {
                const response = await fetch(`${API_URL}/api/gamification/leaderboard?limit=10`);
                const data = await response.json();
                
                const leaderboardBody = document.getElementById('leaderboardBody');
                if (leaderboardBody && data.leaderboard) {
                    leaderboardBody.innerHTML = data.leaderboard.map(user => `
                        <tr ${user.user_id === currentUser.id ? 'style="background: #f8f9ff;"' : ''}>
                            <td class="rank-cell">${user.rank}</td>
                            <td class="user-cell">
                                <img src="${user.profile_pic || 'https://via.placeholder.com/32'}" 
                                     class="user-avatar-small" alt="${user.username}">
                                ${user.username}
                            </td>
                            <td>${user.points}</td>
                            <td>${user.rank_level}</td>
                        </tr>
                    `).join('');
                }
                
            } catch (error) {
                console.error('Error loading leaderboard:', error);
            }
        }

        function loadAchievements(achievements) {
            const achievementsList = document.getElementById('achievementsList');
            if (!achievementsList) return;
            
            // Define all possible achievements
            const allAchievements = [
                { id: 'first_module', name: 'First Step', icon: 'ü•á' },
                { id: 'week_streak', name: 'Week Warrior', icon: 'üî•' },
                { id: 'skill_master', name: 'Skill Master', icon: 'üéØ' },
                { id: 'first_post', name: 'Voice Heard', icon: 'üì¢' },
                { id: 'taiken_creator', name: 'Creator', icon: 'üéÆ' },
                { id: 'first_follower', name: 'Connected', icon: 'üë•' },
                { id: 'community_helper', name: 'Helper', icon: 'ü§ù' },
                { id: 'roadmap_complete', name: 'Journey', icon: 'üèÜ' }
            ];
            
            achievementsList.innerHTML = allAchievements.map(achievement => {
                const isEarned = achievements.some(a => a.title?.includes(achievement.name));
                return `
                    <div class="achievement-badge ${isEarned ? 'earned' : ''}">
                        <div class="badge-icon">${achievement.icon}</div>
                        <div class="badge-name">${achievement.name}</div>
                    </div>
                `;
            }).join('');
        }

        function loadGamificationDailyChallenge(challenge) {
            const container = document.getElementById('gamificationDailyChallenge');
            if (!container) return;
            
            const progress = challenge.progress || 0;
            const total = challenge.total || 3;
            const percentage = challenge.percentage || 0;
            const reward = challenge.reward || 0;
            
            container.innerHTML = `
                <div style="margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span style="font-size: 0.9em;">Progress: ${progress}/${total}</span>
                        <span style="font-size: 0.9em; color: #48bb78;">+${reward} points</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${percentage}%"></div>
                    </div>
                </div>
                <div style="font-size: 0.85em; color: #666;">
                    Complete tasks to earn bonus points!
                </div>
            `;
        }

        function loadRecentPoints(transactions) {
            const container = document.getElementById('recentPoints');
            if (!container) return;
            
            if (transactions.length === 0) {
                container.innerHTML = '<p style="color: #999; text-align: center;">No recent points earned</p>';
                return;
            }
            
            container.innerHTML = transactions.slice(0, 5).map(transaction => `
                <div style="display: flex; justify-content: space-between; align-items: center; 
                            padding: 12px; background: #f8f9fa; border-radius: 8px; margin-bottom: 10px;">
                    <div>
                        <div style="font-weight: 500; margin-bottom: 4px;">${transaction.reason || transaction.source}</div>
                        <div style="font-size: 0.85em; color: #666;">
                            ${new Date(transaction.created_at).toLocaleDateString()}
                        </div>
                    </div>
                    <div style="font-weight: 700; color: #48bb78;">+${transaction.points}</div>
                </div>
            `).join('');
        }

        async function claimDailyRewards() {
            try {
                const response = await fetch(`${API_URL}/api/gamification/daily-rewards`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert(`üéâ Daily rewards claimed! You earned ${data.daily_points} points. Streak: ${data.streak_days} days`);
                    
                    // Refresh gamification data
                    if (window.currentSection === 'gamificationSection') {
                        showGamification();
                    }
                    
                    // Refresh dashboard
                    loadDashboard();
                } else {
                    alert('Failed to claim daily rewards: ' + (data.error || 'Try again tomorrow'));
                }
                
            } catch (error) {
                console.error('Error claiming daily rewards:', error);
                alert('Failed to claim daily rewards. Please try again.');
            }
        }

        // ============================================
        // NEW: RESUME BUILDER FUNCTIONS
        // ============================================

        async function showResumeBuilder() {
            showSection('resumeSection');
        }

        async function generateResume() {
            try {
                // Show loading state
                document.getElementById('resumeLoading').style.display = 'block';
                document.getElementById('resumePreviewContainer').style.display = 'none';
                
                const response = await fetch(`${API_URL}/api/resume/generate`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    displayResumePreview(data.resume, data.formatted);
                } else {
                    alert('Failed to generate resume: ' + (data.error || 'Unknown error'));
                }
                
            } catch (error) {
                console.error('Error generating resume:', error);
                alert('Failed to generate resume. Please try again.');
            } finally {
                document.getElementById('resumeLoading').style.display = 'none';
            }
        }

        function displayResumePreview(resumeData, formattedData) {
            const previewContainer = document.getElementById('resumePreviewContainer');
            const preview = document.getElementById('resumePreview');
            
            // Create resume preview HTML
            preview.innerHTML = `
                <div style="font-family: Arial, sans-serif; line-height: 1.6;">
                    <div style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #333;">
                        <h1 style="margin: 0; color: #333;">${resumeData.personal_info.name}</h1>
                        <h2 style="margin: 10px 0; color: #667eea;">${resumeData.personal_info.title}</h2>
                        <p style="color: #666; max-width: 600px; margin: 15px auto;">
                            ${resumeData.personal_info.summary}
                        </p>
                        <div style="color: #666; margin-top: 10px;">
                            ${resumeData.personal_info.contact.email} | 
                            ${resumeData.personal_info.contact.location}
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #333; border-bottom: 1px solid #ccc; padding-bottom: 8px; margin-bottom: 15px;">Skills</h3>
                        ${resumeData.skills.map(skillCategory => `
                            <div style="margin-bottom: 15px;">
                                <div style="font-weight: bold; color: #555; margin-bottom: 8px;">${skillCategory.category}</div>
                                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    ${skillCategory.items.map(item => `
                                        <span style="background: #f0f0f0; padding: 5px 12px; border-radius: 15px; font-size: 0.9em;">
                                            ${item}
                                        </span>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #333; border-bottom: 1px solid #ccc; padding-bottom: 8px; margin-bottom: 15px;">Experience</h3>
                        ${resumeData.experience.map(exp => `
                            <div style="margin-bottom: 20px;">
                                <div style="display: flex; justify-content: space-between; align-items: start;">
                                    <div>
                                        <div style="font-weight: bold; color: #333;">${exp.title}</div>
                                        <div style="color: #666;">${exp.company}</div>
                                    </div>
                                    <div style="color: #999;">${exp.duration}</div>
                                </div>
                                <p style="color: #666; margin: 8px 0;">${exp.description}</p>
                                <ul style="color: #666; padding-left: 20px;">
                                    ${exp.achievements.map(ach => `<li>${ach}</li>`).join('')}
                                </ul>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 30px; font-size: 0.9em; color: #666;">
                        <strong>Verified by PEARL Platform</strong><br>
                        Skills Verified: ${resumeData.verification.skills_verified}/${resumeData.verification.total_skills} | 
                        Modules Completed: ${resumeData.verification.modules_completed} | 
                        Generated: ${new Date(resumeData.verification.generated_at).toLocaleDateString()}
                    </div>
                </div>
            `;
            
            previewContainer.style.display = 'block';
        }

        function downloadResume(format) {
            alert(`${format.toUpperCase()} download feature will be implemented in the backend`);
            // This would typically call a backend endpoint to generate PDF/DOC
        }

        function shareResume() {
            alert('Share feature will be implemented. You can share your resume link with employers.');
        }

        function regenerateResume() {
            generateResume();
        }

        function loadResumeTemplate(templateType) {
            alert(`Loading ${templateType} template...`);
            // This would fetch a specific template from the backend
        }

        // ============================================
        // NEW: ANALYTICS FUNCTIONS
        // ============================================

        async function showAnalytics() {
            try {
                // Load analytics data
                await loadAnalyticsData();
                showSection('analyticsSection');
            } catch (error) {
                console.error('Error showing analytics:', error);
            }
        }

        async function loadAnalyticsData() {
            try {
                // Load learning analytics
                const response = await fetch(`${API_URL}/api/analytics/learning`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    updateAnalyticsMetrics(data.analytics);
                    updateAnalyticsCharts(data.analytics);
                    updateAnalyticsRecommendations(data.analytics);
                }
                
            } catch (error) {
                console.error('Error loading analytics data:', error);
            }
        }

        function updateAnalyticsMetrics(analytics) {
            document.getElementById('totalLearningHours').textContent = 
                analytics.total_learning_time_hours || '0';
            
            document.getElementById('completionRate').textContent = 
                `${Math.round(analytics.module_completion_rate || 0)}%`;
            
            document.getElementById('skillGrowth').textContent = 
                analytics.skill_growth_trend?.length ? `${analytics.skill_growth_trend.length} skills` : '0%';
            
            document.getElementById('consistencyScore').textContent = 
                `${Math.round((analytics.consistency_score || 0) * 100)}%`;
            
            // Simulate changes (in real app, calculate from previous period)
            document.getElementById('learningHoursChange').textContent = '+12%';
            document.getElementById('completionRateChange').textContent = '+8%';
            document.getElementById('skillGrowthChange').textContent = '+15%';
            document.getElementById('consistencyChange').textContent = '+5%';
        }

        function updateAnalyticsCharts(analytics) {
            // Skill Progress Chart
            const skillProgressChart = document.getElementById('skillProgressChart');
            if (skillProgressChart && analytics.skill_growth_trend) {
                skillProgressChart.innerHTML = `
                    <div style="padding: 20px;">
                        <h4 style="margin-bottom: 15px;">Top Skills by Growth Rate</h4>
                        ${analytics.skill_growth_trend.slice(0, 5).map(skill => `
                            <div style="margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                    <span>${skill.skill}</span>
                                    <span>${Math.round(skill.confidence * 100)}%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${skill.confidence * 100}%"></div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Time Distribution Chart
            const timeDistributionChart = document.getElementById('timeDistributionChart');
            if (timeDistributionChart && analytics.content_interactions) {
                const interactions = analytics.content_interactions;
                const total = Object.values(interactions).reduce((sum, val) => sum + val, 0);
                
                timeDistributionChart.innerHTML = `
                    <div style="padding: 20px;">
                        <h4 style="margin-bottom: 15px;">Time Distribution by Content Type</h4>
                        ${Object.entries(interactions).map(([type, count]) => {
                            const percentage = total > 0 ? Math.round((count / total) * 100) : 0;
                            return `
                                <div style="margin-bottom: 12px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>${type.charAt(0).toUpperCase() + type.slice(1)}</span>
                                        <span>${percentage}%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${percentage}%"></div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            }
        }

        function updateAnalyticsRecommendations(analytics) {
            const container = document.getElementById('analyticsRecommendations');
            if (!container) return;
            
            const recommendations = [];
            
            // Generate recommendations based on analytics
            if (analytics.consistency_score < 0.5) {
                recommendations.push({
                    icon: 'üìÖ',
                    title: 'Improve Consistency',
                    description: 'Try to learn at least 15 minutes every day to build a habit.'
                });
            }
            
            if (analytics.module_completion_rate < 50) {
                recommendations.push({
                    icon: 'üéØ',
                    title: 'Focus on Completion',
                    description: 'Complete more modules to see better skill growth.'
                });
            }
            
            if (analytics.skill_growth_trend?.length < 3) {
                recommendations.push({
                    icon: 'üìà',
                    title: 'Diversify Skills',
                    description: 'Try learning related skills to broaden your expertise.'
                });
            }
            
            if (analytics.total_learning_time_hours < 10) {
                recommendations.push({
                    icon: '‚è±Ô∏è',
                    title: 'Increase Learning Time',
                    description: 'Aim for at least 5 hours per week for noticeable progress.'
                });
            }
            
            // Default recommendation if none apply
            if (recommendations.length === 0) {
                recommendations.push({
                    icon: 'üöÄ',
                    title: 'Keep Going!',
                    description: 'Your learning progress is great. Consider taking on more challenging modules.'
                });
            }
            
            container.innerHTML = recommendations.map(rec => `
                <div class="recommendation-card" style="margin-bottom: 15px;">
                    <div style="font-size: 1.5em; margin-bottom: 10px;">${rec.icon}</div>
                    <div class="recommendation-title">${rec.title}</div>
                    <div class="recommendation-desc">${rec.description}</div>
                </div>
            `).join('');
        }

        function changeAnalyticsTime(range) {
            analyticsTimeRange = range;
            
            // Update button states
            document.querySelectorAll('.time-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Reload analytics data
            loadAnalyticsData();
        }

        // ============================================
        // NEW: CONTENT RECOMMENDATIONS FUNCTIONS
        // ============================================

        async function showContentRecommendations() {
            try {
                // Load user skills for filter
                await loadUserSkillsForFilter();
                
                // Load recommendations
                await loadRecommendations();
                
                showSection('recommendationsSection');
            } catch (error) {
                console.error('Error showing recommendations:', error);
            }
        }

        async function loadUserSkillsForFilter() {
            try {
                const response = await fetch(`${API_URL}/api/analytics/skills`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                const skillFilter = document.getElementById('recSkillFilter');
                if (skillFilter && data.skill_growth) {
                    const skills = data.skill_growth.map(s => s.skill).slice(0, 10);
                    skillFilter.innerHTML = `
                        <option value="">All Skills</option>
                        ${skills.map(skill => `<option value="${skill}">${skill}</option>`).join('')}
                    `;
                }
                
            } catch (error) {
                console.error('Error loading user skills:', error);
            }
        }

        async function loadRecommendations() {
            try {
                // Show loading state
                document.getElementById('recommendationsLoading').style.display = 'block';
                document.getElementById('recommendationsGrid').innerHTML = '';
                document.getElementById('recommendationsEmpty').style.display = 'none';
                
                const skill = document.getElementById('recSkillFilter').value;
                const type = document.getElementById('recTypeFilter').value;
                const difficulty = document.getElementById('recDifficultyFilter').value;
                
                const response = await fetch(`${API_URL}/api/content/recommend`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        skill: skill || 'Python',
                        content_type: type || null,
                        difficulty: difficulty || null
                    })
                });
                
                const data = await response.json();
                
                document.getElementById('recommendationsLoading').style.display = 'none';
                
                if (data.success && data.recommendations?.length > 0) {
                    displayRecommendations(data.recommendations);
                } else {
                    document.getElementById('recommendationsEmpty').style.display = 'block';
                }
                
            } catch (error) {
                console.error('Error loading recommendations:', error);
                document.getElementById('recommendationsLoading').style.display = 'none';
                document.getElementById('recommendationsEmpty').style.display = 'block';
            }
        }

        function displayRecommendations(recommendations) {
            const grid = document.getElementById('recommendationsGrid');
            
            grid.innerHTML = recommendations.map(rec => {
                const typeClass = {
                    'course': 'rec-type-course',
                    'video': 'rec-type-video',
                    'project': 'rec-type-project',
                    'taiken': 'rec-type-taiken'
                }[rec.content_type] || 'rec-type-course';
                
                const typeLabel = {
                    'course': 'Course',
                    'video': 'Video',
                    'project': 'Project',
                    'taiken': 'Taiken'
                }[rec.content_type] || 'Resource';
                
                return `
                    <div class="recommendation-card" onclick="openRecommendation('${rec.url || '#'}')">
                        <div class="rec-type-badge ${typeClass}">${typeLabel}</div>
                        <div class="recommendation-title">${rec.title}</div>
                        <div class="recommendation-desc">${rec.description}</div>
                        <div class="recommendation-meta">
                            <span>${rec.platform}</span>
                            <span>${rec.duration} min</span>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.85em; color: #667eea;">
                            ${Math.round(rec.relevance_score * 100)}% match
                        </div>
                    </div>
                `;
            }).join('');
        }

        function openRecommendation(url) {
            if (url && url !== '#') {
                window.open(url, '_blank');
            } else {
                alert('This resource will be available in the full version');
            }
        }

        // ============================================
        // NEW: COMPLETE PROFILE FUNCTIONS
        // ============================================

        async function showCompleteProfile() {
            try {
                // Load complete profile data
                const response = await fetch(`${API_URL}/api/profile/complete/${currentUser.id}`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    displayCompleteProfile(data.profile);
                    showSection('completeProfileSection');
                }
                
            } catch (error) {
                console.error('Error loading complete profile:', error);
            }
        }

        function displayCompleteProfile(profile) {
            // Update header
            document.getElementById('completeProfileName').textContent = 
                profile.basic_info?.username || 'User';
            
            document.getElementById('completeProfileTitle').textContent = 
                profile.onboarding?.target_role || 'Learner';
            
            document.getElementById('completeProfileBio').textContent = 
                profile.basic_info?.bio || 'No bio yet';
            
            document.getElementById('completeProfileAvatar').src = 
                profile.basic_info?.profile_pic || 'https://via.placeholder.com/150';
            
            // Update stats
            document.getElementById('profileTotalHours').textContent = 
                profile.statistics?.total_learning_hours || 0;
            
            document.getElementById('profileSkillsCount').textContent = 
                profile.statistics?.skills_mastered || 0;
            
            document.getElementById('profileModulesCompleted').textContent = 
                profile.statistics?.modules_completed || 0;
            
            document.getElementById('profilePoints').textContent = 
                profile.statistics?.plaro_points || 0;
            
            // Load default tab (skills)
            switchProfileTab('skills');
        }

        function switchProfileTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.profile-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Load tab content
            const tabContent = document.getElementById('profileTabContent');
            
            switch(tab) {
                case 'skills':
                    loadSkillsTab();
                    break;
                case 'progress':
                    loadProgressTab();
                    break;
                case 'achievements':
                    loadAchievementsTab();
                    break;
                case 'activity':
                    loadActivityTab();
                    break;
                case 'settings':
                    loadSettingsTab();
                    break;
            }
        }

        function loadSkillsTab() {
            const tabContent = document.getElementById('profileTabContent');
            tabContent.innerHTML = `
                <h3 style="margin-bottom: 20px;">Skills Progress</h3>
                <div class="skill-gap-card">
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value" id="tabTotalSkills">0</div>
                            <div class="stat-label">Total Skills</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tabMasteredSkills">0</div>
                            <div class="stat-label">Mastered</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tabInProgress">0</div>
                            <div class="stat-label">In Progress</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value" id="tabToLearn">0</div>
                            <div class="stat-label">To Learn</div>
                        </div>
                    </div>
                    <div id="tabSkillsList" style="margin-top: 20px;"></div>
                </div>
            `;
            
            // Load skills data
            fetchSkillsForTab();
        }

        async function fetchSkillsForTab() {
            try {
                const response = await fetch(`${API_URL}/api/analytics/skills`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('tabTotalSkills').textContent = data.total_skills || 0;
                    document.getElementById('tabMasteredSkills').textContent = data.summary?.mastered_skills || 0;
                    document.getElementById('tabInProgress').textContent = data.summary?.intermediate_skills || 0;
                    document.getElementById('tabToLearn').textContent = data.summary?.beginner_skills || 0;
                    
                    const skillsList = document.getElementById('tabSkillsList');
                    if (skillsList && data.skill_growth) {
                        skillsList.innerHTML = data.skill_growth.map(skill => `
                            <div class="skill-item">
                                <div class="skill-name">${skill.skill}</div>
                                <div class="skill-progress">
                                    <div class="progress-bar-small">
                                        <div class="progress-fill-small" style="width: ${skill.confidence * 100}%"></div>
                                    </div>
                                    <span class="skill-level">${Math.round(skill.confidence * 100)}%</span>
                                </div>
                            </div>
                        `).join('');
                    }
                }
                
            } catch (error) {
                console.error('Error fetching skills for tab:', error);
            }
        }

        function loadProgressTab() {
            const tabContent = document.getElementById('profileTabContent');
            tabContent.innerHTML = `
                <h3 style="margin-bottom: 20px;">Learning Progress</h3>
                <div class="content-grid">
                    <div class="metric-card">
                        <div class="metric-value">0%</div>
                        <div class="metric-label">Overall Progress</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">0</div>
                        <div class="metric-label">Active Paths</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">0</div>
                        <div class="metric-label">Completed Modules</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">0</div>
                        <div class="metric-label">Taikens Played</div>
                    </div>
                </div>
                <div style="margin-top: 30px;">
                    <h4 style="margin-bottom: 15px;">Active Learning Paths</h4>
                    <div id="tabActivePaths"></div>
                </div>
            `;
            
            // Load progress data
            fetchProgressForTab();
        }

        async function fetchProgressForTab() {
            try {
                const response = await fetch(`${API_URL}/auth/profile/${currentUser.id}`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                const activePaths = document.getElementById('tabActivePaths');
                if (activePaths && data.active_sessions) {
                    activePaths.innerHTML = data.active_sessions.map(session => `
                        <div class="module-card active" style="margin-bottom: 10px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-weight: 600; margin-bottom: 5px;">
                                        ${session.jd_text?.substring(0, 40) || 'Learning Path'}...
                                    </div>
                                    <div style="color: #666; font-size: 0.9em;">
                                        Started ${new Date(session.created_at).toLocaleDateString()}
                                    </div>
                                </div>
                                <button class="btn-primary" onclick="loadSession('${session.id}')">
                                    Continue ‚Üí
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
                
            } catch (error) {
                console.error('Error fetching progress for tab:', error);
            }
        }

        function loadAchievementsTab() {
            const tabContent = document.getElementById('profileTabContent');
            tabContent.innerHTML = `
                <h3 style="margin-bottom: 20px;">Achievements & Badges</h3>
                <div class="achievement-badges" id="tabAchievements">
                    <!-- Achievements will be loaded here -->
                </div>
                <div style="margin-top: 30px;">
                    <h4 style="margin-bottom: 15px;">Recent Points</h4>
                    <div id="tabRecentPoints"></div>
                </div>
            `;
            
            // Load achievements data
            fetchAchievementsForTab();
        }

        async function fetchAchievementsForTab() {
            try {
                const response = await fetch(`${API_URL}/api/gamification/summary`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                // Load achievements
                const achievementsContainer = document.getElementById('tabAchievements');
                if (achievementsContainer) {
                    loadAchievements(data.summary?.recent_achievements || []);
                }
                
                // Load recent points
                const recentPoints = document.getElementById('tabRecentPoints');
                if (recentPoints) {
                    loadRecentPoints(data.summary?.points_summary?.recent_transactions || []);
                }
                
            } catch (error) {
                console.error('Error fetching achievements for tab:', error);
            }
        }

        function loadActivityTab() {
            const tabContent = document.getElementById('profileTabContent');
            tabContent.innerHTML = `
                <h3 style="margin-bottom: 20px;">Recent Activity</h3>
                <div id="tabRecentActivity">
                    <div style="text-align: center; padding: 40px; color: #999;">
                        Loading recent activity...
                    </div>
                </div>
            `;
            
            // Load activity data
            fetchActivityForTab();
        }

        async function fetchActivityForTab() {
            try {
                const response = await fetch(`${API_URL}/auth/profile/${currentUser.id}`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`
                    }
                });
                
                const data = await response.json();
                
                const recentActivity = document.getElementById('tabRecentActivity');
                if (recentActivity && data.recent_activity) {
                    if (data.recent_activity.length === 0) {
                        recentActivity.innerHTML = `
                            <div style="text-align: center; padding: 40px; color: #999;">
                                No recent activity yet
                            </div>
                        `;
                    } else {
                        recentActivity.innerHTML = data.recent_activity.map(activity => `
                            <div style="padding: 15px; border-bottom: 1px solid #eee; display: flex; align-items: center; gap: 15px;">
                                <div style="font-size: 1.2em;">
                                    ${getActivityIcon(activity.event_type)}
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-weight: 500;">${getActivityDescription(activity)}</div>
                                    <div style="font-size: 0.9em; color: #666;">
                                        ${new Date(activity.created_at).toLocaleString()}
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    }
                }
                
            } catch (error) {
                console.error('Error fetching activity for tab:', error);
            }
        }

        function getActivityIcon(eventType) {
            const icons = {
                'view': 'üëÄ',
                'like': 'üëç',
                'save': 'üíæ',
                'comment': 'üí¨',
                'share': 'üîÑ',
                'complete': '‚úÖ',
                'start': 'üöÄ',
                'practice_submit': 'üìù',
                'checkpoint_pass': 'üéØ'
            };
            return icons[eventType] || 'üìù';
        }

        function getActivityDescription(activity) {
            const type = activity.content_type;
            const event = activity.event_type;
            
            const descriptions = {
                'view': `Viewed ${type}`,
                'like': `Liked ${type}`,
                'complete': `Completed ${type}`,
                'start': `Started ${type}`,
                'practice_submit': 'Submitted practice task',
                'checkpoint_pass': 'Passed checkpoint'
            };
            
            return descriptions[event] || `${event} ${type}`;
        }

        function loadSettingsTab() {
            const tabContent = document.getElementById('profileTabContent');
            tabContent.innerHTML = `
                <h3 style="margin-bottom: 20px;">Profile Settings</h3>
                <div class="card" style="background: #f8f9fa; padding: 25px;">
                    <div class="form-group">
                        <label class="form-label">Profile Picture URL</label>
                        <input type="text" id="profilePicUrl" class="form-control" 
                               placeholder="https://example.com/photo.jpg" value="${currentUser.profile?.profile_pic || ''}">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Bio</label>
                        <textarea id="profileBio" class="form-control" rows="4" 
                                  placeholder="Tell us about yourself">${currentUser.profile?.bio || ''}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Location</label>
                        <input type="text" id="profileLocation" class="form-control" 
                               placeholder="City, Country" value="${currentUser.profile?.location || ''}">
                    </div>
                    
                    <div class="button-group">
                        <button class="btn-secondary" onclick="switchProfileTab('skills')">Cancel</button>
                        <button class="btn-primary" onclick="updateProfileSettings()">Save Changes</button>
                    </div>
                </div>
            `;
        }

        async function updateProfileSettings() {
            try {
                const updates = {
                    profile_pic: document.getElementById('profilePicUrl').value,
                    bio: document.getElementById('profileBio').value,
                    location: document.getElementById('profileLocation').value
                };
                
                const response = await fetch(`${API_URL}/auth/profile/${currentUser.id}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ updates })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('Profile updated successfully!');
                    // Update local user data
                    if (currentUser.profile) {
                        currentUser.profile = { ...currentUser.profile, ...updates };
                        localStorage.setItem('user_data', JSON.stringify(currentUser));
                    }
                    // Refresh profile view
                    showCompleteProfile();
                } else {
                    alert('Failed to update profile: ' + (data.error || 'Unknown error'));
                }
                
            } catch (error) {
                console.error('Error updating profile:', error);
                alert('Failed to update profile. Please try again.');
            }
        }

        // ============================================
        // NEW: SECTION MANAGEMENT FUNCTIONS
        // ============================================

        function showDashboard() {
            window.currentSection = 'dashboardSection';
            showSection('dashboardSection');
            loadDashboard();
            
            // Update sidebar active state
            updateSidebarActive('dashboard');
        }

        function showLearningPaths() {
            // This would show the learning paths section
            // For now, show the goal section
            showSection('goalSection');
            updateSidebarActive('learning');
        }

        function showJobRecommendations() {
            viewJobs();
            updateSidebarActive('jobs');
        }

        function updateSidebarActive(item) {
            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.classList.remove('active');
            });
            
            const activeLink = document.querySelector(`.sidebar-menu a[onclick*="${item}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }

        function showQuickActions() {
            alert('Quick actions: Start new journey, Generate resume, View achievements');
        }

        // ============================================
        // LOAD SESSION FUNCTION FOR RECENT PATHS
        // ============================================

        async function loadSession(sessionId) {
            try {
                console.log('[SESSION] Loading session:', sessionId);
                showSection('loadingSection');
                
                const response = await fetch(`${API_URL}/api/learning/session/${sessionId}`, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                console.log('[SESSION] Session data:', data);
                
                if (!data.success || !data.session) {
                    throw new Error('Invalid session data received');
                }
                
                const session = data.session;
                currentSessionId = session.id;
                
                // Parse learning paths
                let parsedData = session.jd_parsed;
                
                // Handle if jd_parsed is a string
                if (typeof parsedData === 'string') {
                    try {
                        parsedData = JSON.parse(parsedData);
                    } catch (e) {
                        console.error('[SESSION] Failed to parse jd_parsed:', e);
                        parsedData = {};
                    }
                }
                
                // Extract learning paths
                const learningPathsData = parsedData.learning_paths || parsedData || {};
                
                console.log('[SESSION] Learning paths:', learningPathsData);
                
                // Check if we have valid learning paths
                if (!learningPathsData || Object.keys(learningPathsData).length === 0) {
                    showErrorMessage('No learning paths found in this session', 'Session Error');
                    showDashboard();
                    return;
                }
                
                // Store in global variable
                learningPaths = learningPathsData;
                
                // Display journey overview
                displayJourneyFromSession(learningPathsData, session.jd_text || 'Your Learning Journey');
                
                showSection('journeySection');
                showSuccessMessage('Session loaded successfully!', 'Welcome Back');
                
            } catch (error) {
                console.error('[SESSION] Error loading session:', error);
                showErrorMessage(
                    error.message || 'Failed to load learning session. Please try again.',
                    'Session Load Error'
                );
                showDashboard();
            }
        }

        function displayJourneyFromSession(learningPathsData, goalText) {
            // Update journey title
            const journeyTitle = document.getElementById('journeyTitle');
            if (journeyTitle) {
                journeyTitle.textContent = goalText || 'Your Learning Path';
            }
            
            // Display skills list
            const skillsList = document.getElementById('skillsList');
            if (skillsList) {
                const skills = Object.keys(learningPathsData);
                skillsList.innerHTML = skills.map(skill => 
                    `<span class="skill-chip">${skill}</span>`
                ).join('');
            }
            
            // Calculate totals
            let totalModules = 0;
            let totalHours = 0;
            let completedModules = 0;
            
            Object.values(learningPathsData).forEach(path => {
                const modules = path.modules || [];
                totalModules += modules.length;
                totalHours += path.estimated_hours || 0;
                completedModules += modules.filter(m => m.status === 'completed').length;
            });
            
            // Update stats
            document.getElementById('totalModulesCount').textContent = totalModules;
            document.getElementById('totalHoursCount').textContent = totalHours;
            
            const progress = totalModules > 0 
                ? Math.round((completedModules / totalModules) * 100) 
                : 0;
            document.getElementById('progressCount').textContent = `${progress}%`;
            
            // Display modules list
            const modulesList = document.getElementById('modulesList');
            if (modulesList) {
                modulesList.innerHTML = '';
                
                Object.entries(learningPathsData).forEach(([skill, path], skillIndex) => {
                    const modules = path.modules || [];
                    
                    modules.forEach((module, moduleIndex) => {
                        const card = document.createElement('div');
                        card.className = 'module-card';
                        
                        // Add status classes
                        if (module.status === 'completed') {
                            card.classList.add('completed');
                        } else if (module.status === 'active') {
                            card.classList.add('active');
                        } else if (module.status === 'locked') {
                            card.classList.add('locked');
                        }
                        
                        const moduleId = module.module_id || (moduleIndex + 1);
                        const moduleName = module.name || `Module ${moduleId}`;
                        const estimatedHours = module.estimated_hours || 2;
                        
                        card.innerHTML = `
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div style="flex: 1;">
                                    <div style="font-weight: 600; margin-bottom: 5px;">
                                        ${moduleName}
                                    </div>
                                    <div style="color: #666; font-size: 0.9em;">
                                        ${skill} ‚Ä¢ ${estimatedHours} hours
                                    </div>
                                    ${module.status === 'completed' ? 
                                        '<div style="color: #48bb78; font-size: 0.85em; margin-top: 5px;">‚úì Completed</div>' : 
                                        module.status === 'active' ? 
                                        '<div style="color: #ed8936; font-size: 0.85em; margin-top: 5px;">‚óè In Progress</div>' :
                                        '<div style="color: #999; font-size: 0.85em; margin-top: 5px;">üîí Locked</div>'
                                    }
                                </div>
                                <button 
                                    class="btn-primary" 
                                    onclick="loadModuleFromSession('${skill}', ${moduleIndex})"
                                    ${module.status === 'locked' ? 'disabled' : ''}
                                >
                                    ${module.status === 'completed' ? 'Review' : 'Start'} ‚Üí
                                </button>
                            </div>
                        `;
                        
                        modulesList.appendChild(card);
                    });
                });
            }
        }

        function loadModuleFromSession(skill, moduleIndex) {
            try {
                console.log('[MODULE] Loading module:', skill, moduleIndex);
                
                currentSkill = skill;
                currentModule = moduleIndex;
                
                // Get the learning path for this skill
                const path = learningPaths[skill];
                if (!path) {
                    showErrorMessage('Skill path not found', 'Error');
                    return;
                }
                
                // Get the specific module
                const modules = path.modules || [];
                if (moduleIndex >= modules.length) {
                    showErrorMessage('Module not found', 'Error');
                    return;
                }
                
                const module = modules[moduleIndex];
                currentModuleData = module;
                
                console.log('[MODULE] Module data:', module);
                
                // Update breadcrumb
                document.getElementById('currentSkillBreadcrumb').textContent = skill;
                document.getElementById('currentModuleBreadcrumb').textContent = module.name || `Module ${module.module_id}`;
                
                // Update module detail section
                document.getElementById('moduleTitle').textContent = module.name || `Module ${module.module_id}`;
                document.getElementById('moduleDescription').textContent = module.description || '';
                
                // Display objectives
                const objectivesList = document.getElementById('objectivesList');
                if (objectivesList) {
                    objectivesList.innerHTML = '';
                    const objectives = module.learning_objectives || module.objectives || [];
                    objectives.forEach(obj => {
                        const li = document.createElement('li');
                        li.textContent = obj;
                        objectivesList.appendChild(li);
                    });
                }
                
                // Display actions
                const actionsList = document.getElementById('actionsList');
                if (actionsList) {
                    actionsList.innerHTML = '';
                    const actions = module.actions || [];
                    
                    if (actions.length === 0) {
                        actionsList.innerHTML = '<p style="color: #999;">No actions available for this module yet.</p>';
                    } else {
                        actions.forEach((action, idx) => {
                            const actionBox = document.createElement('div');
                            actionBox.className = 'action-box';
                            if (action.completed) {
                                actionBox.classList.add('completed');
                            }
                            
                            // Determine action type badge
                            const badgeClass = {
                                'byte': 'badge-byte',
                                'course': 'badge-course',
                                'taiken': 'badge-taiken',
                                'checkpoint': 'badge-checkpoint'
                            }[action.type] || 'badge-course';
                            
                            const actionUrl = action.url || action.external_resource?.url || '#';
                            
                            actionBox.innerHTML = `
                                <span class="action-type-badge ${badgeClass}">
                                    ${action.type || 'Action'}
                                </span>
                                <div style="font-weight: 600; margin: 10px 0;">
                                    ${action.title || 'Learning Action'}
                                </div>
                                <div style="color: #666; font-size: 0.9em; margin-bottom: 10px;">
                                    ${action.description || ''}
                                </div>
                                ${action.platform ? `<div style="color: #999; font-size: 0.85em; margin-bottom: 10px;">üìç ${action.platform}</div>` : ''}
                                ${action.duration_minutes ? `<div style="color: #999; font-size: 0.85em; margin-bottom: 10px;">‚è±Ô∏è ${action.duration_minutes} minutes</div>` : ''}
                                <div style="display: flex; gap: 10px; margin-top: 10px;">
                                    ${actionUrl !== '#' ? `
                                        <button class="btn-info btn-icon" onclick="window.open('${actionUrl}', '_blank')">
                                            View Resource <span class="icon">‚Üó</span>
                                        </button>
                                    ` : ''}
                                    ${!action.completed ? `
                                        <button class="btn-success" onclick="markActionComplete('${skill}', ${moduleIndex}, ${idx})">
                                            ‚úì Mark Complete
                                        </button>
                                    ` : `
                                        <span style="color: #48bb78; font-weight: 600;">‚úì Completed</span>
                                    `}
                                </div>
                            `;
                            
                            actionsList.appendChild(actionBox);
                        });
                    }
                }
                
                // Show module detail section
                showSection('moduleDetailSection');
                
            } catch (error) {
                console.error('[MODULE] Error loading module:', error);
                showErrorMessage('Failed to load module. Please try again.', 'Module Error');
            }
        }

        async function markActionComplete(skill, moduleIndex, actionIndex) {
            try {
                console.log('[ACTION] Marking action complete:', skill, moduleIndex, actionIndex);
                
                // Get the module
                const path = learningPaths[skill];
                if (!path || !path.modules || !path.modules[moduleIndex]) {
                    throw new Error('Module not found');
                }
                
                const module = path.modules[moduleIndex];
                if (!module.actions || !module.actions[actionIndex]) {
                    throw new Error('Action not found');
                }
                
                // Mark as complete locally
                module.actions[actionIndex].completed = true;
                
                // Check if all actions are complete
                const allComplete = module.actions.every(a => a.completed);
                
                if (allComplete) {
                    module.status = 'completed';
                    
                    // Unlock next module if exists
                    if (moduleIndex + 1 < path.modules.length) {
                        path.modules[moduleIndex + 1].status = 'active';
                    }
                    
                    showSuccessMessage(
                        `Module "${module.name}" completed! üéâ`,
                        'Great Job'
                    );
                } else {
                    showSuccessMessage('Action completed!', 'Progress');
                }
                
                // Refresh the module view
                loadModuleFromSession(skill, moduleIndex);
                
                // TODO: Send to backend to persist
                // await apiCall('/agent/complete-action', {
                //     method: 'POST',
                //     body: JSON.stringify({
                //         session_id: currentSessionId,
                //         skill: skill,
                //         module_id: module.module_id,
                //         action_index: actionIndex,
                //         completion_data: { action_type: module.actions[actionIndex].type }
                //     })
                // });
                
            } catch (error) {
                console.error('[ACTION] Error marking complete:', error);
                showErrorMessage('Failed to mark action complete', 'Error');
            }
        }

        async function loadModule(skill, moduleIndex, cardElement) {
            loadModuleFromSession(skill, moduleIndex);
        }

        function backToJourney() {
            showSection('journeySection');
        }

        function backToHome() {
            showDashboard();
        }

        // ============================================
        // KEEP ALL YOUR EXISTING FUNCTIONS BELOW
        // (signUp, signIn, startJourney, etc.)
        // ============================================
        // MISSING CRITICAL FUNCTIONS
        // ============================================

        async function startJourney() {
            const careerGoal = document.getElementById('careerGoal').value.trim();
            const jobDesc = document.getElementById('jobDesc').value.trim();
            
            if (!careerGoal) {
                showError('Error', 'Please enter a career goal');
                return;
            }
            
            showSection('loadingSection');
            
            try {
                const data = await apiCall('/agent/start-journey', {
                    method: 'POST',
                    body: JSON.stringify({
                        goal: careerGoal,
                        job_description: jobDesc,
                        user_id: currentUser?.id
                    })
                });
                
                if (data.success) {
                    learningPaths = data.learning_paths || {};
                    currentSessionId = data.session_id;
                    
                    // Display journey modules
                    displayModules();
                    showSection('journeySection');
                    showSuccessMessage('Learning path created!', 'Success');
                } else {
                    showErrorMessage(data.error || 'Failed to create learning path', 'Error');
                    showSection('goalSection');
                }
            } catch (error) {
                showErrorMessage(error.message, 'Error');
                showSection('goalSection');
            }
        }

        function viewJobs() {
            showSection('jobsSection');
            loadJobRecommendations();
        }

        function displayModules() {
            const modulesList = document.getElementById('modulesList');
            if (!modulesList || !learningPaths) return;
            
            let html = '';
            let totalModules = 0;
            let totalHours = 0;
            
            for (const skill in learningPaths) {
                const path = learningPaths[skill];
                totalModules += path.modules?.length || 0;
                totalHours += path.estimated_hours || 0;
                
                path.modules?.forEach((module, idx) => {
                    html += `
                        <div class="module-card" onclick="loadModule('${skill}', ${idx})">
                            <div class="module-header">
                                <h4>${module.title}</h4>
                                <span class="badge">${module.type || 'Module'}</span>
                            </div>
                            <p style="color: #666; margin: 10px 0;">${module.description || ''}</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 0.9em; color: #999;">‚è± ${module.estimated_hours || 2}h</span>
                                <button class="btn-primary" onclick="loadModule('${skill}', ${idx}); return false;">
                                    Start ‚Üí
                                </button>
                            </div>
                        </div>
                    `;
                });
            }
            
            modulesList.innerHTML = html;
            
            // Update counts
            document.getElementById('totalModulesCount').textContent = totalModules;
            document.getElementById('totalHoursCount').textContent = totalHours;
            document.getElementById('progressCount').textContent = '0%';
        }

        function loadModule(skill, moduleIdx) {
            currentSkill = skill;
            currentModule = moduleIdx;
            currentModuleData = learningPaths[skill]?.modules[moduleIdx];
            
            if (!currentModuleData) {
                showErrorMessage('Module not found', 'Error');
                return;
            }
            
            // Update breadcrumb
            document.getElementById('currentSkillBreadcrumb').textContent = skill;
            document.getElementById('currentModuleBreadcrumb').textContent = currentModuleData.title;
            
            // Update module detail section
            document.getElementById('moduleTitle').textContent = currentModuleData.title;
            document.getElementById('moduleDescription').textContent = currentModuleData.description || '';
            
            // Load objectives
            const objectivesList = document.getElementById('objectivesList');
            if (objectivesList && currentModuleData.objectives) {
                objectivesList.innerHTML = currentModuleData.objectives
                    .map(obj => `<li>${obj}</li>`)
                    .join('');
            }
            
            // Load actions
            const actionsList = document.getElementById('actionsList');
            if (actionsList) {
                actionsList.innerHTML = (currentModuleData.actions || [])
                    .map((action, idx) => `
                        <div class="action-box">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h4 style="margin: 0 0 5px 0;">${action.title}</h4>
                                    <p style="color: #666; margin: 0; font-size: 0.9em;">${action.description || ''}</p>
                                </div>
                                <button class="btn-primary" onclick="completeAction(${idx})">‚úì Done</button>
                            </div>
                        </div>
                    `)
                    .join('');
            }
            
            showSection('moduleDetailSection');
        }

        function nextModule() {
            if (currentModule < (learningPaths[currentSkill]?.modules?.length - 1)) {
                loadModule(currentSkill, currentModule + 1);
            } else {
                showCheckpoint();
            }
        }

        function backToJourney() {
            showSection('journeySection');
        }

        function showCheckpoint() {
            const checkpointQuestions = document.getElementById('checkpointQuestions');
            if (checkpointQuestions && currentModuleData?.checkpoint) {
                checkpointQuestions.innerHTML = (currentModuleData.checkpoint.questions || [])
                    .map((q, idx) => `
                        <div style="margin-bottom: 20px;">
                            <label style="font-weight: 600; margin-bottom: 10px; display: block;">${idx + 1}. ${q.question}</label>
                            <div style="margin-left: 10px;">
                                ${q.options.map((opt, optIdx) => `
                                    <label style="display: block; margin-bottom: 8px; cursor: pointer;">
                                        <input type="radio" name="q${idx}" value="${optIdx}" onchange="checkpointAnswers[${idx}] = ${optIdx}">
                                        ${opt}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    `)
                    .join('');
            }
            
            openModal('checkpointModal');
        }

        function submitCheckpoint() {
            // Simple validation - in production, grade the answers
            const allAnswered = checkpointAnswers.length === (currentModuleData?.checkpoint?.questions?.length || 0);
            
            if (!allAnswered) {
                showErrorMessage('Please answer all questions', 'Incomplete');
                return;
            }
            
            const resultsContent = document.getElementById('resultsContent');
            resultsContent.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 3em; margin-bottom: 10px;">üéâ</div>
                    <h3>Module Checkpoint Complete!</h3>
                    <p>Great job! You've completed this module's checkpoint.</p>
                    <div style="margin-top: 20px; padding: 15px; background: #f0fdf4; border-radius: 8px;">
                        <p>You earned <strong>100 points</strong> for this module!</p>
                    </div>
                </div>
            `;
            
            closeModal('checkpointModal');
            openModal('resultsModal');
        }

        function completeAction(actionIdx) {
            showSuccessMessage('Action marked as complete!', 'Success');
        }

        function claimDailyRewards() {
            showSuccessMessage('Daily reward claimed!', 'Reward Claimed');
        }

        function loadNextSteps() {
            // Placeholder - should be implemented
            console.log('[DASHBOARD] Loading next steps');
        }

        function loadRightPanelStats() {
            // Placeholder - should be implemented
            console.log('[DASHBOARD] Loading right panel stats');
        }

        function loadDailyChallenge() {
            // Placeholder - should be implemented
            console.log('[DASHBOARD] Loading daily challenge');
        }

        function loadRecommendations() {
            showSuccessMessage('Loading recommendations...', 'Loading');
        }

        function changeAnalyticsTime(range) {
            analyticsTimeRange = range;
            const buttons = document.querySelectorAll('.time-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        function generateResume() {
            showErrorMessage('Resume generation not yet implemented', 'Coming Soon');
        }

        function downloadResume(format) {
            showSuccessMessage(`Resume downloaded as ${format.toUpperCase()}!`, 'Download');
        }

        function shareResume() {
            showSuccessMessage('Resume link copied to clipboard!', 'Shared');
        }

        function regenerateResume() {
            showSuccessMessage('Resume regenerated!', 'Success');
        }

    </script>
</body>
</html>